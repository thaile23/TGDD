(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["company-bill"],{a455:function(a,e,o){"use strict";o.r(e);var s=function(){var a=this,e=a.$createElement,o=a._self._c||e;return o("li",[o("label",{class:{active:!0===a.isActive},on:{click:a.check}},[o("i",{staticClass:"cartnew-select"}),o("span",[a._v(a._s(a.$siteConfig.exportCompanyBill))])]),o("height-transition",[o("validation-observer",{directives:[{name:"show",rawName:"v-show",value:!0===a.isActive,expression:"isActive === true"}],ref:"companyBill",staticClass:"infocompany",class:{active:!0===a.isActive},attrs:{tag:"form"}},[o("validation-provider",{staticClass:"fillinput",attrs:{tag:"div",rules:"required:"+a.$formErrors.companyBill.companyName},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors,t=e.classes;return[o("delayed-input",{class:t,attrs:{maxlength:"255",placeholder:"Tên công ty"},model:{value:a.model.companyName,callback:function(e){a.$set(a.model,"companyName",e)},expression:"model.companyName"}}),s.length>0?o("small",{staticClass:"error"},[a._v(a._s(s[0]))]):a._e()]}}])}),o("validation-provider",{staticClass:"fillinput",attrs:{tag:"div",rules:"required:"+a.$formErrors.companyBill.companyAddress},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors,t=e.classes;return[o("delayed-input",{class:t,attrs:{maxlength:"255",placeholder:"Địa chỉ công ty"},model:{value:a.model.companyAddress,callback:function(e){a.$set(a.model,"companyAddress",e)},expression:"model.companyAddress"}}),s.length>0?o("small",{staticClass:"error"},[a._v(a._s(s[0]))]):a._e()]}}])}),o("validation-provider",{staticClass:"fillinput",attrs:{tag:"div",rules:"required:"+a.$formErrors.companyBill.companyTaxCode+"|isValidTaxCode:"+a.$formErrors.companyBill.companyTaxCodeNotValid+"|isMatch:0303217354,"+a.$formErrors.companyBill.companyTaxCodeNotRight+"|validIfEmptyErrorMessage:"+a.serverErrorMessage.companyTaxCode},scopedSlots:a._u([{key:"default",fn:function(e){var s=e.errors,t=e.classes;return[o("delayed-input",{class:t,attrs:{placeholder:"Mã số thuế"},model:{value:a.model.companyTaxCode,callback:function(e){a.$set(a.model,"companyTaxCode",e)},expression:"model.companyTaxCode"}}),s.length>0?o("small",{staticClass:"error"},[a._v(a._s(s[0]))]):a._e()]}}])})],1)],1)],1)},t=[],i=o("5530"),r=(o("99af"),o("498a"),o("7bb1")),n=o("1b62"),l=o("1288"),c=o("8c33"),m=o("eb35"),d=o("fa37"),p=o("2f62"),y=o("9ec6"),v=o("bfcb"),u=o("56d1"),f=o("3c6f"),h=o("834a"),b=o("4d86"),C=o("539c"),x={companyTaxCode:""},T="0303217354",O={components:{ValidationObserver:r["a"],ValidationProvider:r["b"],DelayedInput:m["a"],HeightTransition:f["a"]},mixins:[n["b"],n["g"],C["b"]],data:function(){return{model:{companyName:"",companyAddress:"",companyTaxCode:""},serverErrorMessage:x,isLoadSavedData:!1,isDisableSubmitForm:!1}},created:function(){this.loadSavedData()},computed:Object(i["a"])({},Object(p["c"])(v["l"],{companyTax:v["n"]})),methods:{validate:function(){return!1===this.isActive?this.$validate([]):this.$validate([this.$refs.companyBill])},updateCompanyBillInfo:function(a){var e=this;!1===Object(d["isNullOrUndefined"])(a)&&this.$store.dispatch("".concat(v["l"],"/").concat(u["b"]),{value:Object(i["a"])({},a)}).then((function(){e.resetServerErrorMessage()})).catch((function(a){e.resetServerErrorMessage();var o=a.message,s=a.typeError,t=a.elementError;s===y["c"].text&&t===b["d"].companyTaxCodeInCartError&&(e.serverErrorMessage.companyTaxCode=o)}))},submitFormHasCompanyBill:function(a){var e=a.companyName,o=a.companyAddress,s=a.companyTaxCode;if(!0===this.isActive){var t=this.getRequestCompanyBillForm({companyName:e,companyAddress:o,companyTaxCode:s});!1===Object(d["isEmptyObject"])(t)&&this.updateCompanyBillInfo(Object(i["a"])(Object(i["a"])({},t),{},{isHaveCompanyTax:!0}))}},submitFormNotHaveCompanyBill:function(){!1===this.isActive&&this.updateCompanyBillInfo({isHaveCompanyTax:!1})},loadSavedData:function(){var a,e,o,s=null===(a=this.companyTax)||void 0===a?void 0:a.companyName,t=null===(e=this.companyTax)||void 0===e?void 0:e.companyAddress,i=null===(o=this.companyTax)||void 0===o?void 0:o.companyTaxCode;this.model={companyName:s,companyAddress:t,companyTaxCode:i},this.isActive=!1===Object(d["isNullOrUndefined"])(this.companyTax),!0===this.isActive&&(this.isLoadSavedData=!0,this.isDisableSubmitForm=!0)},getRequestCompanyBillForm:function(a){var e=a.companyName,o=a.companyAddress,s=a.companyTaxCode,t={};return!1===Object(d["isEmptyOrNil"])(null===e||void 0===e?void 0:e.trim())&&(t.companyName=e),!1===Object(d["isEmptyOrNil"])(null===o||void 0===o?void 0:o.trim())&&(t.companyAddress=o),!1===Object(d["isEmptyOrNil"])(null===s||void 0===s?void 0:s.trim())&&(t.companyTaxCode=s),t},resetServerErrorMessage:function(){this.serverErrorMessage=Object(i["a"])({},x)}},watch:{isActive:function(a){var e;!1===a&&(null===(e=this.$refs.companyBill)||void 0===e||e.reset())},isDelayedActive:function(a){!0!==this.isDisableSubmitForm?!0===a?(this.submitFormHasCompanyBill(this.model),Object(l["a"])(c["a"].openFormCompanyBillInCart)):this.submitFormNotHaveCompanyBill():this.isDisableSubmitForm=!1},computedModel:{deep:!0,immediate:!0,handler:function(a,e){if(!1===this.isLoadSavedData){var o=a.companyName,s=a.companyAddress,t=a.companyTaxCode,i={};o!==(null===e||void 0===e?void 0:e.companyName)&&!1===Object(d["isEmptyOrNil"])(o)&&(i.companyName=o),s!==(null===e||void 0===e?void 0:e.companyAddress)&&!1===Object(d["isEmptyOrNil"])(s)&&(i.companyAddress=s),t!==(null===e||void 0===e?void 0:e.companyTaxCode)&&t!==T&&!0===Object(h["D"])(t)&&(i.companyTaxCode=t),!1===Object(d["isEmptyObject"])(i)&&this.submitFormHasCompanyBill(i)}else this.isLoadSavedData=!1}}}},g=O,N=o("2877"),A=Object(N["a"])(g,s,t,!1,null,null,null);e["default"]=A.exports}}]);