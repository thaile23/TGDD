(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["consignee-instead"],{"8c99":function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("li",{directives:[{name:"show",rawName:"v-show",value:!0===e.isShow,expression:"isShow === true"}]},[t("label",{class:{active:!0===e.isActive},on:{click:e.check}},[t("i",{staticClass:"cartnew-select"}),t("span",[e._v(e._s(e.$siteConfig.consigneeInstead))])]),t("height-transition",[t("validation-observer",{directives:[{name:"show",rawName:"v-show",value:!0===e.isActive,expression:"isActive === true"}],ref:"consigneeInstead",staticClass:"infouser",class:{active:!0===e.isActive},attrs:{tag:"form"}},[t("validation-provider",{staticClass:"cough",attrs:{tag:"div",rules:"requiredSexWithErrorMessage:"+e.$formErrors.consigneeInstead.sex},scopedSlots:e._u([{key:"default",fn:function(s){var i=s.errors;return[t("sex-selection",{model:{value:e.model.sex,callback:function(s){e.$set(e.model,"sex",s)},expression:"model.sex"}}),i.length>0?t("small",{staticClass:"error"},[e._v(e._s(i[0]))]):e._e()]}}])}),t("div",{staticClass:"infouser__inputs-container"},[t("validation-provider",{staticClass:"fillinput halfwidth left",attrs:{tag:"div",rules:"required:"+e.$formErrors.consigneeInstead.name},scopedSlots:e._u([{key:"default",fn:function(s){var i=s.errors,a=s.classes;return[t("delayed-input",{staticClass:"capitalize",class:a,attrs:{placeholder:e.$siteConfig.consigneeInsteadNamePlaceholder,maxlength:"50",isCapitalize:!0},model:{value:e.model.name,callback:function(s){e.$set(e.model,"name",s)},expression:"model.name"}}),i.length>0?t("small",{staticClass:"error"},[e._v(e._s(i[0]))]):e._e()]}}])}),t("validation-provider",{staticClass:"fillinput halfwidth left",attrs:{tag:"div",rules:"required:"+e.$formErrors.consigneeInstead.phone+"|isPhoneNumber:"+e.$formErrors.customerInfo.invalidPhone+"|validIfEmptyErrorMessage:"+e.serverErrorMessage.phone},scopedSlots:e._u([{key:"default",fn:function(s){var i=s.errors,a=s.classes;return[t("delayed-input",{class:a,attrs:{placeholder:e.$siteConfig.consigneeInsteadPhoneNumberPlaceholder,type:"tel",maxlength:"10"},model:{value:e.model.phone,callback:function(s){e.$set(e.model,"phone",s)},expression:"model.phone"}}),i.length>0?t("small",{staticClass:"error"},[e._v(e._s(i[0]))]):e._e()]}}])})],1)],1)],1)],1)},a=[],n=t("5530"),o=(t("b0c0"),t("99af"),t("7bb1")),r=t("1b62"),c=t("1288"),l=t("8c33"),d=t("bd4e"),u=t("eb35"),v=t("fa37"),h=t("2f62"),m=t("9ec6"),f=t("bfcb"),p=t("38b3"),b=t("3c6f"),g=t("834a"),C=t("4d86"),x=t("539c"),I={phone:""},S={components:{ValidationObserver:o["a"],ValidationProvider:o["b"],SexSelection:d["a"],DelayedInput:u["a"],HeightTransition:b["a"]},mixins:[r["b"],r["g"],x["l"]],data:function(){return{model:{name:"",phone:"",sex:m["j"].undefined},serverErrorMessage:Object(n["a"])({},I),isLoadSavedData:!1,isDisableSubmitForm:!1}},created:function(){this.loadSavedData()},computed:Object(n["a"])({},Object(h["c"])(f["l"],{customerReceiveInfo:f["r"]})),methods:{validate:function(){return!1===this.isActive||!1===this.isShow?this.$validate([]):this.$validate([this.$refs.consigneeInstead])},loadSavedData:function(){var e,s,t,i=null===(e=this.customerReceiveInfo)||void 0===e?void 0:e.name,a=null===(s=this.customerReceiveInfo)||void 0===s?void 0:s.phone,n=null===(t=this.customerReceiveInfo)||void 0===t?void 0:t.sex;this.model={name:i,sex:n,phone:a},this.isActive=!1===Object(v["isNullOrUndefined"])(this.customerReceiveInfo),!0===this.isActive&&(this.isLoadSavedData=!0,this.isDisableSubmitForm=!0)},updateReceiverInfo:function(e){var s=this;this.$store.dispatch("".concat(f["l"],"/").concat(p["b"]),{value:Object(n["a"])({},e)}).then((function(){s.resetServerErrorMessage()})).catch((function(e){var t=e.message,i=e.typeError,a=e.elementError;i===m["c"].text&&a===C["d"].receiverPhoneInCartError&&(s.serverErrorMessage.phone=t)}))},submitFormHasConsignee:function(e){var s=e.name,t=e.phone,i=e.sex;if(!1!==this.isShow&&!0===this.isActive){var a={};!1===Object(v["isEmptyOrNil"])(t)&&Object(g["x"])(t)&&(a.phone=t),!1===Object(v["isEmptyOrNil"])(s)&&(a.name=s),!0===Object(g["C"])(i)&&(a.sex=i),!1===Object(v["isEmptyObject"])(a)&&this.updateReceiverInfo(Object(n["a"])(Object(n["a"])({},a),{},{isHaveReceiver:!0}))}},submitFormNotHasConsignee:function(){!1!==this.isShow&&!1===this.isActive&&this.updateReceiverInfo({isHaveReceiver:!1})},resetServerErrorMessage:function(){this.serverErrorMessage=Object(n["a"])({},I)}},watch:{isActive:function(e){var s;!1===e&&(null===(s=this.$refs.consigneeInstead)||void 0===s||s.reset())},isDelayedActive:function(e){!0!==this.isDisableSubmitForm?!0===e?(this.submitFormHasConsignee(this.model),Object(c["a"])(l["a"].openFormCallConsigneeInsteadInCart)):this.submitFormNotHasConsignee():this.isDisableSubmitForm=!1},model:{deep:!0,immediate:!0,handler:function(e){!1===this.isLoadSavedData?this.submitFormHasConsignee(e):this.isLoadSavedData=!1}}}},w=S,E=t("2877"),O=Object(E["a"])(w,i,a,!1,null,null,null);s["default"]=O.exports}}]);