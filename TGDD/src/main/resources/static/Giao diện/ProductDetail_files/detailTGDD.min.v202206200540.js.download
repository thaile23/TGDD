/*! 20-08-2014
* https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce
* https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce
* Võ Nhật Nam */
function ga_openOrder(n,t,i,r,u,f,e){ga_addProduct(n,t,i,r,u,f,e);ga_sendAction("add");ga("send","event","UX","click","open order form");window.location.href.toString().indexOf("_utm_recommend=1")!=-1&&(ga("send","event","UX","click","Recommend - Open Order Form"),$("#wrap_cart .closepopup").click(function(){ga("send","event","UX","click","Recommend - Close Order Form")}))}function ga_completeOrder(n,t,i,r,u,f,e){ga("set","&cu","VND");ga_addProduct(n,t,i,r,u,f,e);ga_sendAction("purchase",{id:new Date,affiliation:"Online store",revenue:f,tax:"0",shipping:"0",coupon:""});ga("send","event","UX","click","complete order");window.location.href.toString().indexOf("_utm_recommend=1")!=-1&&ga("send","event","UX","click","Recommend - Order Form Complete");f>0&&typeof dataLayer!="undefined"&&dataLayer.push({event:"addCartComplete"})}function ga_viewProduct(n,t,i,r,u,f,e){ga_addProduct(n,t,i,r,u,f,e);ga_sendAction("detail");ga("send","pageview")}function ga_addProduct(n,t,i,r,u,f,e){ga("ec:addProduct",{id:n,name:t,category:i,brand:r,variant:u,price:f,quantity:e})}function ga_sendAction(n,t){t!=undefined?ga("ec:setAction",n,t):ga("ec:setAction",n)}function ga_conversion(n){if(typeof dataLayer!="undefined")switch(n){case 1:dataLayer.push({event:"addCartCompleteAtHome"});break;case 2:dataLayer.push({event:"addCartCompleteAtStore"});break;case 3:dataLayer.push({event:"addCartCompleteAtInstallment"})}}function addToCompare(n,t,i,r=false){var c,d,v,o,u,f,s,l,g,y,p,nt,w,e,a,b,k,h;if(t!=undefined&&t.preventDefault(),isFirstSS||showCompare(),c=3,closeTipCompare(),closeCompareBox(),$(".stickcompare label.error").hide(),d="<li class=formsg><a href='javascript:' class='cp-plus cp-plus_new' onclick='OpenPopup(this)'><i class='icImageCompareNew'><\/i><p>Thêm sản phẩm<\/p><\/a>",n<=0)return(idcompare==undefined||idcompare.length<=0)&&(createCookie("ck_idcompare","",30),$("#ss-now").hide()),!1;if(idcompare.indexOf(n)>=0)return r||cacheError("already"),u=$(".listproduct *[data-id="+n+"]").first(),(u==undefined||u.length<=0)&&(u=$(".compare-popup *[data-id="+n+"]").first()),u.find("a.item-ss").removeClass("active").html("<i><\/i> So sánh"),e=$(".box02 *[data-id="+n+"]").first(),e!=undefined&&e.length>0&&e.removeClass("active").html("<i class='icondetail-sosanh'><\/i> So sánh"),removeCompare(n),ClosePopup(),countCompare(),$(".stickcompare").length>0&&$(".stickcompare").is(":hidden")==!1&&$("#ss-now").hide(),!1;if(v=!1,$(".listcompare li.formsg").remove(),o='<li id={id}><a href="javascript:void(0)" id="{id}"><img src="{image}" alt=""><h3>{manu}<\/h3><\/a><span class="remove-ic-compare" onclick="removeCompare({id},event);"><i class="iconcate-closess"><\/i><\/span><\/li>',u=$(".listproduct *[data-id="+n+"]").first(),(u==undefined||u.length<=0)&&(u=$(".compare-popup *[data-id="+n+"]").first()),u.find("a.item-ss").addClass("active").html("<i><\/i> Đã thêm so sánh"),e=$(".box02 *[data-id="+n+"]").first(),e!=undefined&&e.length>0&&e.addClass("active").html("<i class='icondetail-sosanh'><\/i> Đã thêm so sánh"),u!=undefined&&u.length>0&&(v=!0),i!==undefined?(u=$(i),f=u.data("href"),s=u.data("img"),l=u.data("name")):(f=u.find("a").attr("href")=="javascript:;"?u.data("url"):u.find("a").attr("href"),s=u.find(".item-img img").attr("src"),l=u.find("a > h3").text()!=""?u.find("a > h3").text():u.find(".item-info h3").text(),u.find("a > h3").attr("title")!==undefined&&u.find("a > h3").attr("title")!==""&&(l=u.find("a > h3").attr("title")),(s==undefined||s=="undefined")&&(s=u.find(".item-img img").attr("data-src"))),y=f.indexOf("?"),f=f.substring(0,y!=-1?y:f.length),p="",nt=urlcompare.length>0?urlcompare[0].slice(1,urlcompare[0].slice(1,-1).indexOf("/")+1):"",f.charAt(0)=="/"&&(w=f.replace(f.charAt(0),"").split("/"),w.length==2&&(p=w[0])),urlcompare.length>0&&nt.indexOf(p)<0)return $(".listcompare li").each(function(){var n=parseInt($(this).attr("id"));n>0&&removeCompare(n)}),cacheError("same"),addToCompare(n,t,i),!1;if(v&&localStorage.setItem("CompareCateName",document.cateName),idcompare.length>=c)return $(".listcompare li.formsg").remove(),cacheError("full"),u.parent("ul.pro-compare").length<=0&&u.find("a.item-ss").removeClass("active").html("<i><\/i> So sánh"),e=$(".box02 *[data-id="+n+"]").first(),e!=undefined&&e.removeClass("active").html("<i class='icondetail-sosanh'><\/i> So sánh"),!1;if(g=document.cateName!==undefined?document.cateName:"",idcompare.push(parseInt(n)),urlcompare.push(f.indexOf("/")===0?f:"/"+f),o=o.replace(/{id}/g,n),o=o.replace("{image}",s),o=o.replace("{manu}",l),$(".stickcompare").length?$(".stickcompare").addClass("spaceInDown").show():(a=document.isDesktop==!0?"<div class='stickcompare stickcompare_new cp-desktop'><label class='error'><\/label><a href='javascript:;' onclick='clearCompare(event);' class='clearall'><i class='iconcate-closess'><\/i>Thu gọn<\/a><ul class='listcompare' data-catename='"+document.cateName+"'><\/ul><\/div> ":"<div class='stickcompare stickcompare_new'><label class='error'><\/label><ul class='listcompare' data-catename='"+document.cateName+"'><\/ul><\/div>",a=a.replace("{catename}",g.toLowerCase()),$("body").append(a)),$(".stickcompare").find("ul").append(o),$(".compare-box").length>0&&$(".compare-box > ul > li").length==2&&(b=$(".compare-box > ul").html(),console.log(b),$(".compare-box").remove(),$(".stickcompare").find("ul").append(b)),idcompare.length<c)for(k=0;k<=c;k++)$(".stickcompare .listcompare li").length<c&&$(".stickcompare .listcompare").append(d);else idcompare.length==3&&closeAddCmp();return h=!1,idcompare.length<2&&(h=!0),createCookie("ck_idcompare",idcompare.toString(),30),countCompare(),isFirstSS=!1,$(".closecompare").remove(),document.isDesktop==!0?$(".stickcompare").append('<div class="closecompare"><a href="javascript:;" onclick="'+(h?"":"doCompare();")+'"class="doss'+(h?" prevent":"")+'">So sánh ngay<\/a><a href="javascript:;" onclick="RemoveAllIdCompare()" class="txtremoveall">Xóa tất cả sản phẩm<\/a><\/div>'):$(".stickcompare").append('<div class="closecompare"><a href="javascript:;" onclick="clearCompare(event);" class="clearall">Thu gọn<\/a><a href="javascript:;" onclick="'+(h?"":"doCompare();")+'"class="doss'+(h?" prevent":"")+'">So sánh ngay<\/a><\/div>'),$(".stickcompare").addClass("spaceInDown").show(),ClosePopup(),$(".stickcompare").length>0&&$(".stickcompare").is(":hidden")==!1&&$("#ss-now").hide(),!1}function removeCompare(n,t){var r,e,o,u,i,f;if(t!==undefined&&t.preventDefault(),r=3,$(".listcompare li.formsg").remove(),e="<li class=formsg><a href='javascript:' class='cp-plus cp-plus_new' onclick='OpenPopup(this)'><i class='icImageCompareNew'><\/i><p>Thêm sản phẩm<\/p><\/a>",idcompare.indexOf(n)>=0){for(urlcompare.splice(idcompare.indexOf(n),1),idcompare.splice(idcompare.indexOf(n),1),createCookie("ck_idcompare",idcompare.toString(),30),countCompare(),o=$(".listproduct *[data-id="+n+"]").first(),o.find("a.item-ss").removeClass("active").html("<i><\/i> So sánh"),u=$(".box02 *[data-id="+n+"]").first(),u!=undefined&&u.removeClass("active").html("<i class='icondetail-sosanh'><\/i> So sánh"),idcompare.length==0?clearCompare():idcompare.length<2&&$(".stickcompare").find(".boxcompare").remove(),i=!1,idcompare.length<2&&(i=!0),$(".stickcompare").find("li#"+n).remove(),$(".closecompare").remove(),f=0;f<=r;f++)$(".stickcompare .listcompare li").length<r&&$(".stickcompare .listcompare").append(e);$(".stickcompare label.error").removeAttr("style").hide();document.isDesktop==!0?$(".stickcompare").append('<div class="closecompare"><a href="javascript:;" onclick="'+(i?"":"doCompare();")+'"class="doss'+(i?" prevent":"")+'">So sánh ngay<\/a><a href="javascript:;" onclick="RemoveAllIdCompare()" class="txtremoveall">Xóa tất cả sản phẩm<\/a><\/div>'):$(".stickcompare").append('<div class="closecompare"><a href="javascript:;" onclick="clearCompare(event);" class="clearall">Thu gọn<\/a><a href="javascript:;" onclick="'+(i?"":"doCompare();")+'"class="doss'+(i?" prevent":"")+'">So sánh ngay<\/a><\/div>')}return!1}function clearCompare(){$(".stickcompare").hide();document.isDesktop==!0&&($(".overlay").hide(),$(".overlay").removeClass("v2"));$(".stickcompare label.error").removeAttr("style").hide();var n=getCookie("ck_idcompare"),t=n!=""&&n!=null?n.split(","):[];t.length>0?($("#ss-now").show(),document.isDesktop==!1&&document.productId>0&&$("#ss-now").hide()):$("#ss-now").hide()}function showCompare(n,t,i=false){var r,u;$(".stickcompare").length<=0&&(r=getCookie("ck_idcompare"),r!==""&&r!==null?getCompareListByListID(r,n>0?n:0,t):n>0&&t!==undefined?getCompareListByListID(n,0,t,i):$(".box02__right").length>0&&(u=$(".box02__right").data("id"),u>0&&($(".stickcompare").length<=0?showCompare(u,"div.box02__right",!0):addToCompare(u,event,"div.box02__right"))));$(".stickcompare").show();isFirstSS&&$("#ss-now").append(appendLoadingViewMore());$(".stickcompare label.error").removeAttr("style").hide();$(".stickcompare").length>0&&$(".stickcompare").is(":hidden")==!1&&$("#ss-now").hide()}function doCompare(n){var t=document.cateUrl,i,r,u;return t!==""&&urlcompare.length>=2?(urlcompare[0].indexOf(t)<0&&urlcompare[1].indexOf(t)<0&&(t=urlcompare[0].slice(1,urlcompare[0].slice(1,-1).indexOf("/")+1)),i="itm_source=so-sanh-trang-nganh-hang",n!==undefined&&n==!0&&(i="itm_source=goi-y-so-sanh-trang-nganh-hang"),r="",r=idcompare.length==3?"?productid="+idcompare[2]+"&"+i:"?"+i,u="/"+t+"/"+urlcompare[0].replace("/"+t+"/","")+"-vs-"+urlcompare[1].replace("/"+t+"/","")+r,$(".stickcompare").remove(),$(".box02__right").length<=0&&loadingRedirect(),window.location=u,idcompare=[],urlcompare=[]):cacheError("least"),!1}function setProductIdCompare(n,t){$.ajax({url:"/Category/SetProductIdCompare",type:"POST",data:{id:n},cache:!1,beforeSend:function(){},success:function(){loadingRedirect();window.location=t},error:function(){loadingRedirect();window.location=t}})}function closeCompareBox(){$(".compare-box").length>0&&($(".compare-box").remove(),$("#notifychatmsg").show())}function callCompareSuggestion(n){typeof showSuggest!="undefined"&&showSuggest=="true"&&(n==undefined||n===!0)&&($("#lstp .cate > li").each(function(){var n=parseInt($(this).find("a").first().data("pid"));n>0&&addToCompareAuto(n)}),idcompare.length>=2&&$(window).scrollTop()>100?$(".compare-box").show("slow"):$(".compare-box").hide())}function addToCompareAuto(n,t,i){t!=undefined&&t.preventDefault();$("ul.listcompare").find("li").length>0&&idcompare.length>0&&(urlcompare=[],idcompare=[],$(".stickcompare").remove());var u=$(".cate a[data-pid='"+n+"']"),r;return(i==undefined?r=u.attr("href"):(u=$(i),r=u.attr("data-src")),urlcompare.length>0&&r.indexOf(urlcompare[0].slice(1,urlcompare[0].slice(1,-1).indexOf("/")+1))<0)?!1:(idcompare[idcompare.length]=parseInt(n),urlcompare[urlcompare.length]=r.indexOf("/")===0?r:"/"+r,$(".compare-box > p > span").html(idcompare.length),!1)}function closeTipCompare(n){n!=undefined&&n.preventDefault();$(".cate li .tip-abs.show").length>0&&($(".cate li .tip-abs").next().show(),$(".cate li .tip-abs").remove())}function showTipCompare(){var n=$(".locationbox__popup:visible").length==0,t=getCookie("DMX_CompareTip");t==null&&typeof isShowTipCompare!="undefined"&&isShowTipCompare.toString().toLowerCase()==="true"&&$(window).scrollTop()>150&&$("#lstp .cate > li").length<=10&&n&&($(".cate li .tip-abs").append('<div class="overlaytip" onclick="closeTipCompare(event)"><\/div>'),setTimeout(function(){$(".cate li .tip-abs").addClass("show");$("html,body").animate({scrollTop:$(".cate li .tip-abs").offset().top-300},"slow");$(".cate li .tip-abs").next().hide();createCookie("DMX_CompareTip",1,365)},2e3),isShowTipCompare=!1)}function loadPopupAddProd(){$(".addcompare").length?$("#suggestss").show():($("body").append("<div id=suggestss><div class=overlay><\/div><div class='addcompare' onsubmit='return false;'><label>Mời bạn nhập tên sản phẩm<\/label><input id='kcc' type='text' onsubmit='return false;' placeholder='Nhập tên sản phẩm' autocomplete='off' autofocus='' /><a class=closeacp href=javascript: onclick=closeAddCmp()>&#10006;<\/a><\/div><\/div>"),$(".overlay").show());initSuggest()}function closeAddCmp(){$("#suggestss").hide();$(".overlay").hide()}function initSuggest(){function t(){$(".input-text i.iconcate-closess").show();$(".autocomplete").show();$("#loading-compare").length<=0&&$(".autocomplete").append(appendLoadingCompare());$("#loading-compare").show()}function n(){$(".autocomplete").hide();$("#loading-compare").hide()}if(document.getElementById("kcc")!=undefined){isInitSuggest=!0;var i=AutoComplete.defaults.KeyboardMappings;i.Enter.Callback=function(){return};return}}function appendLoadingCompare(){return'<div id="loading-compare"><p class="ccsslder"><span class="ccsswrap"><span class="ccssdot"><\/span><span class="ccssdot"><\/span><span class="ccssdot"><\/span><\/span><\/p><\/div>'}function getCompareListByListID(n,t,i,r=false){$.ajax({url:"/Category/SuggestForCompareBoxOnCategory",type:"GET",data:{key:"",cid:document.cateID,lstProductID:n},cache:!1,beforeSend:function(){},success:function(n){if(n!==null&&n!==""){var u=$(n).find("li");$("#ss-now .stage").remove();u!==undefined&&(u.each(function(){addToCompare($(this).data("id"),null,this)}),createCookie("ck_idcompare",idcompare.toString(),30),$(".stickcompare").addClass("spaceInDown").show())}i!==undefined&&t>0?addToCompare(t,event,"div.box02__right",r):t>0&&addToCompare(t)},error:function(n){console.log(n)}})}function countCompare(){var t=getCookie("ck_idcompare"),n;let i=!1;t!==""&&t!==null&&(n=t.split(","),n.length>0?(i=!0,$(".sticky-bar-ss").length>0?isMobile?$(".sticky-bar-ss span").text("("+n.length+")"):$(".sticky-bar-ss").append("<span class='sticky-bar-number'>"+n.length+"<\/span>"):($(".stickcompare").length>0&&$(".stickcompare").is(":hidden")==!1?$("#ss-now").hide():$("#ss-now").show(),document.isDesktop==!1&&document.productId>0&&$("#ss-now").hide(),$("#count-ss").text("("+n.length+")"))):$(".sticky-bar-ss .sticky-bar-number").length>0&&$(".sticky-bar-ss .sticky-bar-number").remove());i||($(".sticky-bar-ss").length==0?$("#ss-now").hide():isMobile?$(".sticky-bar-ss span").text(""):$(".sticky-bar-ss .sticky-bar-number").remove())}function cacheError(n){var t="",i;switch(n){case"full":t="Vui lòng xóa bớt sản phẩm để tiếp tục so sánh!";break;case"least":t="Bạn phải chọn ít nhất 2 sản phẩm để có thể so sánh!";break;case"already":t="Bạn đã chọn sản phẩm này rồi, vui lòng chọn sản phẩm khác!";break;case"same":i=localStorage.getItem("CompareCateName");i=i==null||i==undefined?"Sản phẩm":capitalizeFirstLetter(i);t="Chỉ có thể so sánh sản phẩm cùng nhóm hàng. "+i+" đã được xoá khỏi giỏ so sánh."}t!==""&&($(".stickcompare label.error").show().text(t).animate({opacity:1},800),$(".stickcompare").length>0&&$(".stickcompare").is(":hidden")&&$(".errorcompare").text(t).show(),setTimeout(function(){$(".stickcompare label.error").hide();$(".errorcompare").text("").hide()},4e3))}function appendLoadingViewMore(){return'<div class="stage"><div class="dot-stretching"><\/div><\/div>'}function OpenPopup(n){var e,t,i,f,r,u;if(flagOpenPopup)return!1;if(flagOpenPopup=!0,idcompare.length>=3)return cacheError("full"),!1;if($(n).append(appendLoadingViewMore()),e=document.cateID,t=localStorage.getItem("viewedHistory"),t!=null&&!JSON.stringify(t).includes("proId")&&!JSON.stringify(t).includes("cateId"))return localStorage.removeItem("viewedHistory"),!1;if(t=JSON.parse(t),u=[],i=t!=null?t.filter(n=>n.cateId==e):null,i!=null&&i.length>0){for(f=[],r=0;r<i.length;r++)i[r]!==""&&i[r]!==null&&i[r].proId!==undefined&&f.push(i[r]);u=f.map(n=>n.proId);u.length>3&&(u=u.slice(0,3))}$("#dlding").show();$.ajax({url:"/Compare/OpenPopup",type:"POST",data:{productIds:u},cache:!0,success:function(t){$("#dlding").hide();$(n).find(".stage").remove();flagOpenPopup=!1;$(".popup-addsp").show();t!=null&&t.errorCode==1?($(".popup-addsp .pro-compare_viewed").html(t.html),t.html==""&&t.html.trim()==""?$(".compare-popup h4").hide():$(".compare-popup h4").show(),RemoveOnclickHtml($(".pro-compare li a.pro-nrview")),RemoveOnclickHtml($(".pro-compare li a:first-child")),CheckButtonCompareCategory()):$(".compare-popup h4").hide()}})}function ClosePopup(){$(".popup-addsp").hide();$(".popup-addsp .pro-compare_search").html("").hide();$(".popup-addsp .pro-compare_viewed").html("");$("#searchproductcompare input").val("")}function SearchProductCompare(n,t){$(".pro-compare_search").hide();var r=document.cateID,i=$(n).val();if(i==""||i.length<2||r<=0)return!1;if(typeof t=="undefined"&&(t=!1),!t)return clearTimeout(timmer),timmer=setTimeout(function(){SearchProductCompare(n,!0)},300),!1;$.ajax({url:"/Compare/SearchProductCompare",type:"POST",data:{categoryId:r,keyword:i,hasWebStatusList:!0},cache:!0,success:function(t){$(".pro-compare_search").show();t!=null&&t.errorCode==1&&t.html!=""?($(".pro-compare_search").html(t.html),RemoveOnclickHtml($(".pro-compare li a.pro-nrview")),RemoveOnclickHtml($(".pro-compare li a:first-child")),CheckButtonCompareCategory()):$(".pro-compare_search").html("<li class='text-center'>Không tìm thấy kết quả cho từ khóa: <b>"+t.keyword+"<\/b><\/li>");$(n).val(t.keyword)}})}function RemoveOnclickHtml(n){n.each(function(){$(this).attr("onclick",null);$(this).hasClass("pro-nrview")&&$(this).addClass("item-ss")})}function RemoveAllIdCompare(){createCookie("ck_idcompare","",30);idcompare=[];$(".stickcompare.stickcompare_new .listcompare").html("");$(".closecompare").remove();$("a.item-ss").each(function(){$(this).removeClass("active").html("<i><\/i> So sánh")});$(".box02").each(function(){$(this).find(".box02__right").removeClass("active").html("<i class='icondetail-sosanh'><\/i> So sánh")});ClosePopup();clearCompare();closeCompareBox();countCompare()}function capitalizeFirstLetter(n){return n.charAt(0).toUpperCase()+n.slice(1)}function initManuInfoPopup(){console.log("init ManuInfoPopup_");var n=ManuInfoPopup();$(".manu-info-popup__content__btn-close").unbind();$(".manu-info-popup__content__btn-close").on("click",n.closePopup);$(".parameter__manu").unbind();$(".parameter__manu").on("click",n.openPopup)}function ManuInfoPopup(){function n(){showElementScroll($(".block-tab.show"));showElementScroll(htmlEl);$(".manu-info-popup").removeClass("active")}function t(){console.log("openPopup_");hideElementScroll($(".block-tab.show"));hideElementScroll(htmlEl);$(".manu-info-popup").addClass("active")}return{closePopup:n,openPopup:t}}function init360Gallery(){const n=$("#three-d-degree-image");n&&$.getScript("/js/Product/Gallery/threesixty.js").done(function(t,i){if($(".threesixty_images").hide(),i!=="success"||threesixtyTimeout){$(".threesixty_images").show();return}const r=n.data("start-frame");threesixtyTimeout=setTimeout(function(){const i=n.children(".threesixty"),u=900,t=n.ThreeSixty({totalFrames:36,endFrame:r+36,currentFrame:r,framerate:90,playSpeed:150,imgList:".threesixty_images",progress:".spinner",imagePath:n.data("resource-folder-path"),filePrefix:n.data("file-name-prefix"),ext:n.data("file-name-extension"),width:u,height:600*u/800,navigation:!1,responsive:!0,onReady:function(){t.play();$(".threesixty_images").show();i.on("tapstart touchstart mousedown",function(){t.stop()});i.on("tapstart touchend mouseup",function(){t.play()})}})},100)})}function getProductRatingFormValue(n,t,i=satisfationType.disappointment,r=false,u=false){let f={};return n?(f=$(n).serializeObject(),{content:f.inputContent,name:f.inputFullName,phone:f.inputPhoneNumber,gender:f.inputGender,email:f.inputEmail,productId:document.productId,type:t,satisfationType:i,isUpdateArticleRating:r,age:f.inputAge,productLink:f.inputLink,isAlreadyRating:u}):f}function mappingServerErrorToLocal(n,t=["inputPhoneNumber","inputEmail","inputContent"]){let i={};if(!n||Array.isArray(t)===!1||t.length===0)return i;for(let r=0;r<t.length;r++){const u=t[r],f=getElementError(n,u);f&&(i[u]=f)}return i}function getElementError(n,t){return n&&Array.isArray(n[t])===!0?n[t][0].Message:""}function disableRatingForm(n,t=false){if(n&&$(n).length>0){const i=$(n).find("input,textarea,button");i&&i.prop("disabled",!0);t===!0&&disableElement(n)}}function enableRatingForm(n,t=false){if(n&&$(n).length>0){const i=$(n).find("input,textarea,button");i&&i.prop("disabled",!1);t===!0&&enableElement(n)}}function getGalleryType(n){switch(n){default:return galleryType.none;case galleryTypeId.featuredImagesGallery:return galleryType.featuredImageGallery;case galleryTypeId.videosGallery:return galleryType.videoGallery;case galleryTypeId.unboxGallery:return galleryType.unboxImageGallery;case galleryTypeId.threeSixtyGallery:return galleryType.threeSixtyGallery;case galleryTypeId.fullSpecificationGallery:return galleryType.specificationGallery;case galleryTypeId.articleGallery:return galleryType.articleGallery;case galleryTypeId.productImagesGallery:return galleryType.productImageGallery;case galleryTypeId.cameraImagesGallery:return galleryType.cameraImageGallery;case galleryTypeId.realisticImagesGallery:return galleryType.realisticImageGallery}}function isElementActive(n,t="active"){return n&&$(n).hasClass(t)===!0}function activeElement(n,t="active"){n&&$(n).not(`.${t}`).addClass(t)}function activeElementTimeout(n,t="active",i=3e3){if(n){if($(n).not(`.${t}`).addClass(t),isJsType(i,jsType.number)===!1||i<=0)return;let r=setTimeout(function(){deactiveElement($(n));clearTimeout(r)},i)}}function deactiveElement(n,t="active"){n&&$(n).removeClass(t)}function disableElement(n){activeElement(n,"disabled-all-events")}function enableElement(n){deactiveElement(n,"disabled-all-events")}function focusElement(n){n&&typeof $(n).focus=="function"&&$(n).focus()}function setElementValue(n,t){n&&t&&$(n).val(t)}function clearFormValues(n,t="input, textarea"){if(n&&typeof t=="string"&&t.trim()){const i=$(n).find(t);i.length>0&&i.val("")}}function resetFormValidations(n){n&&typeof n.resetForm=="function"&&n.resetForm()}function toggleDropdown(n,t=200){n&&$(n).slideToggle(t)}function submitElement(n){n&&$(n).submit()}function hideElement(n,t=false){n&&(t===!1?$(n).hide():activeElement(n,"display-none"))}function showElement(n,t=false){n&&(t===!1?$(n).show():deactiveElement(n,"display-none"))}function setElementInnerText(n,t=""){n&&typeof t=="string"&&t.trim()&&$(n).text(t)}function getElementAttributeValue(n,t=""){return n&&typeof t=="string"&&t.trim()?$(n).attr(t)?$(n).attr(t):"":""}function setElementAttributeValue(n,t="",i=""){n&&typeof t=="string"&&t.trim()&&$(n).attr(t,i)}function hideElementScroll(n){n&&isElementActive(n,"overflow-hidden")===!1&&activeElement(n,"overflow-hidden")}function showElementScroll(n){n&&isElementActive(n,"overflow-hidden")===!0&&deactiveElement(n,"overflow-hidden")}function openPopupGallery(n){typeof n=="string"&&$(n)&&$(`#show-popup-${n}`).click()}function showLoadingEffect(){activeElement($(".gallery-loading"))}function hideLoadingEffect(){deactiveElement($(".gallery-loading"))}function isJsType(n,t){return typeof t!="string"?!1:typeof n===t}function getPolicy(){var t=$(".jsClick.red.active").html()!=undefined?".scenarioTwoPriceDetail":".scenarioNomal",n;$(t+" .policy__list li").length>0?(n="",$(t+" .policy__list li").each(function(){var i=$(this).find("i"),t;i.hasClass("icondetail-sachhd")==!1&&i.hasClass("noslide")==!1&&(t=$(this).find("p").html(),t!=undefined&&t.toLowerCase().indexOf("phí vật tư")==-1&&t.toLowerCase().indexOf("không bảo hành")==-1&&t.toLowerCase().indexOf("hoạt động kinh doanh")==-1&&(n+="<p>"+t+"<\/p>"))}),n==""?($(".slider-policy").parents(".content-t__list__item").remove(),$(".slider-policy").remove()):$(".slider-policy div").html(n),$(".slider-policy div").each(function(){var i=$(this),t=i.find("p"),n;t.length==1&&t.html().toLowerCase().indexOf("giao hàng tận nhà nhanh chóng")>-1&&(n=$(".slider-policy img.si-ghtn"),n.attr("src",n.data("src")),n.removeClass("hide"),t.remove())})):($(".slider-policy").parents(".content-t__list__item").remove(),$(".slider-policy").remove())}function GalleryRating(n={ratingType,formElName,likeElName,dislikeElName,thankYouElName,timeClosePopup,timeShowThankYouMessage,actionWhenAlreadyRating,actionWhenPressLike,actionWhenPressDislike,isCheckAlreadyRatingOneTime,actionWhenSubmitDislikeForm}){function s(){$(document).on("click",t.likeElName,h);$(document).on("click",t.dislikeElName,c);$(document).on("click",`${t.formElName} .gallery-rating-popup__content__body__genders__option`,p);$(document).on("click",`${t.formElName} .gallery-rating-popup__content__title__close`,o);$(document).on("keyup",`${t.formElName} textarea[name="inputContent"]`,f);$(document).on("change",`${t.formElName} textarea[name="inputContent"]`,f)}function f(n){n&&n.target&&$('.article-rating__form input[name="inputContent"]').val(n.target.value)}function i(){let n=getProductRatingFormValue($(".article-rating__form"),r());if(n==null||n.productId<=0||n.type<0)return response={satisfationType:0,isAlreadyRating:!0};let t=sessionStorage.getItem("IMAGE_RATING_SESSION"),i="";switch(n.type){case 7:i=n.productId+"_"+n.type+"_"+n.productLink;break;default:i=n.productId+"_"+n.type}if(t==null||t.trim()==""||t.includes(i)==!1)return response={satisfationType:0,isAlreadyRating:!1};let f=0,u=t.split("|");for(let n=0;n<u.length;n++){let t=u[n];if(t.includes(i)){let i=t.split("_");i.length>=2&&(f=parseInt(i[1]));n=u.length}}return response={satisfationType:f,isAlreadyRating:!0}}function h(){$.ajax({type:"POST",data:getProductRatingFormValue($(".article-rating__form"),t.ratingType,satisfationType.satisfation,!1,i().isAlreadyRating),url:"/Product/RatingProduct",beforeSend:function(){disableElement($(".gallery-rating"));showLoadingEffect()},success:function(n){if(n.isHasError===!1){let i=sessionStorage.getItem("IMAGE_RATING_SESSION");sessionStorage.setItem("IMAGE_RATING_SESSION",i+"|"+n.satisId+"_"+satisfationType.satisfation+"_"+document.productId+"_"+t.ratingType+"_"+$(".article-rating__form input[name=inputLink]").val());$(t.likeElName).addClass("active");activeElementTimeout($(t.thankYouElName),"active",t.timeShowThankYouMessage);t.isAlreadyRating=!0;t.satisfationType=satisfationType.satisfation;isJsType(t.actionWhenPressLike,jsType.function)===!0&&t.actionWhenPressLike()}else enableElement($(".gallery-rating"));hideLoadingEffect()},error:function(){enableElement($(".gallery-rating"));hideLoadingEffect()}})}function c(){t.isAlreadyRating!==!0&&(v(),isJsType(t.actionWhenPressDislike,jsType.function)===!0&&t.actionWhenPressDislike())}function l(){disableElement($(".gallery-rating"));$(t.thankYouElName).addClass("active");t.satisfationType===satisfationType.satisfation?$(t.likeElName).addClass("active"):$(t.dislikeElName).addClass("active")}function a(){t.formGalleryRatingValidation||(t.formGalleryRatingValidation=$(t.formElName).validate({errorClass:"rating-error",rules:{inputContent:{required:!0}},messages:{inputContent:{required:"Vui lòng nhập nội dung góp ý"}},onfocusout:!1,submitHandler:function(n,u){return u.preventDefault(),$.ajax({type:"POST",cache:!1,data:getProductRatingFormValue($(".article-rating__form"),r(),satisfationType.disappointment,!1,i().isAlreadyRating),url:"/Product/RatingProduct",beforeSend:function(){disableElement($(".gallery-rating-popup__content"));showLoadingEffect()},success:function(n){enableElement($(".gallery-rating-popup__content"));hideLoadingEffect();resetFormValidations(t.formGalleryRatingValidation);const i=n.isHasError===!0;if(i===!0){const i=JSON.parse(n.listErrors);t.formGalleryRatingValidation.showErrors(mappingServerErrorToLocal(i))}else{let i=sessionStorage.getItem("IMAGE_RATING_SESSION");sessionStorage.setItem("IMAGE_RATING_SESSION",i+"|"+n.SatisId+"_"+satisfationType.disappointment+"_"+document.productId+"_"+r()+"_"+$(".article-rating__form input[name=inputLink]").val());b();disableElement($(".gallery-rating"));$(t.thankYouElName).addClass("active");$(t.dislikeElName).addClass("active");t.actionWhenSubmitDislikeForm();t.isAlreadyRating=!0}},error:function(){enableElement($(".gallery-rating-popup__content"));hideLoadingEffect()}}),!1}}))}function r(){let n=0;switch(getElementAttributeValue($(t.formElName),"data-type")){case"Article":n=3;break;case"ImageGallery":n=5;break;case"VideoGallery":n=7;break;case"HighPrice":n=9}return n}function e(){if(t.isCheckAlreadyRatingOneTime!==!0||t.isAlreadyRating!==!0){let n=i();t.isAlreadyRating=n.isAlreadyRating===!0;t.isAlreadyRating===!0&&(t.satisfationType=n.satisfationType,isJsType(t.actionWhenAlreadyRating,jsType.function)===!0&&t.actionWhenAlreadyRating())}}function v(){t.isAlreadyRating!==!0&&($(t.formElName).data("type",t.ratingType),$(t.formElName).hasClass("active")===!1&&($(t.formElName).addClass("active"),focusElement($(`${t.formElName} textarea[name="inputContent"]`))))}function y(){clearFormValues($(t.formElName));resetFormValidations(t.formGalleryRatingValidation)}function o(){enableRatingForm($(t.formElName));$(t.formElName).hasClass("active")===!0&&($(t.formElName).removeClass("active"),y(),$(".gallery-rating-popup__content__body__rating-success").removeClass("active"))}function p(){$(".gallery-rating-popup__content__body__genders__option").removeClass("active");$(this).addClass("active");$('.gallery-rating-popup__content__body input[name="inputGender"]').val($(this).data("value"))}function w(){u&&clearTimeout(u);u=setTimeout(()=>o(),t.timeClosePopup)}function b(){$(".gallery-rating-popup__content__body__rating-success").hasClass("active")===!1&&(activeElementTimeout($(".gallery-rating-popup__content__body__rating-success"),"active",t.timeShowThankYouMessage),disableRatingForm($(t.formElName)),w())}let t={likeElName:n?n.likeElName:"",dislikeElName:n?n.dislikeElName:"",thankYouElName:n?n.thankYouElName:"",timeClosePopup:!n||isJsType(n.timeClosePopup,jsType.number)===!1||n.timeClosePopup<0?0:n.timeClosePopup,timeShowThankYouMessage:!n||isJsType(n.timeShowThankYouMessage,jsType.number)===!1||n.timeShowThankYouMessage<0?0:n.timeShowThankYouMessage,actionWhenAlreadyRating:!n||isJsType(n.actionWhenAlreadyRating,jsType.function)===!1?function(){}:n.actionWhenAlreadyRating,actionWhenPressLike:!n||isJsType(n.actionWhenPressLike,jsType.function)===!1?function(){}:n.actionWhenPressLike,actionWhenPressDislike:!n||isJsType(n.actionWhenPressDislike,jsType.function)===!1?function(){}:n.actionWhenPressDislike,actionWhenSubmitDislikeForm:!n||isJsType(n.actionWhenSubmitDislikeForm,jsType.function)===!1?function(){}:n.actionWhenSubmitDislikeForm,ratingType:n?n.ratingType:"",isCheckAlreadyRatingOneTime:!n||isJsType(n.isCheckAlreadyRatingOneTime,jsType.boolean)===!1?!0:n.isCheckAlreadyRatingOneTime,formGalleryRatingValidation:null,isAlreadyRating:!1,isMounted:!1,satisfationType:satisfationType.disappointment,formElName:n?n.formElName:""};this.data=t;this.mounted=function(){(t.isAlreadyRating===!1?e():l(),t.isMounted!==!0)&&(t.isMounted=!0,s(),a())};this.checkIfAlreadyRatingProduct=e;let u}function ListGalleries(){function f(t,i){if(n.isLoadingImagesInSlider!==!0){n.isLoadingImagesInSlider=!0;const u=`.show-tab[data-gallery-id='${t}'][data-color-id='${i}']`;if($(u).length>0)$(".show-tab").removeClass("active"),$(u).addClass("active"),n.isLoadingImagesInSlider=!1;else{const f={productId:document.productId,isAppliance:!1,galleryType:getGalleryType(t),colorId:i};$.ajax({type:"GET",data:f,url:"/Product/GetGalleryItem",beforeSend:function(){showLoadingEffect()},success:function(t){r&&clearTimeout(r);$(".box01 .box01__show")&&t&&($(".show-tab").removeClass("active"),$(".box01 .box01__show").append(t),$(u).addClass("active"),v($(u).find(".detail-slider")));hideLoadingEffect();n.isLoadingImagesInSlider=!1},error:function(){hideLoadingEffect();n.isLoadingImagesInSlider=!1}})}}}function y(){const n=$(this).data("gallery-id"),t=$(this).data("color-id");$(".box01__tab .itemTab").removeClass("active-scroll-to");$(this).addClass("active-scroll-to");$(this).hasClass("is-show-popup")===!1?($(".box01__tab .itemTab").removeClass("active"),$(this).addClass("active"),f(n,t)):openPopupGallery(n)}function p(n,t){return`#tab-content-${n}-${t}`}function w(n,t){return`#thumb-${n}-${t}`}function s(n){return $(n).data("gallery-id")}function h(n){return $(n).data("color-id")}function b(n){if(n){const t=$(n).data("is-360-gallery")==="True";t===!0&&typeof init360Gallery=="function"&&init360Gallery()}}function c(n){if($(n).length>0){const t=$(n)[0].querySelector(`.scroll-top`);t&&t.click()}}function k(r){if(document.isDesktop===1){getPolicy();const e=$(r).find(".sync1:not(.unbox-gallery)"),f=$(r).find(".sync2:not(.unbox-gallery)");e.owlCarousel({items:1,loop:!1,dots:!1,nav:!0,autoplay:!1,autoplayHoverPause:!1,lazyLoad:!0,navText:["",""],lazyLoadEager:3,onChanged:function(t){const u=t.item.index,r=f.find(".owl-item").removeClass("synced").eq(u).addClass("synced");r.length>0&&r[0].scrollIntoView({behavior:"smooth",inline:"center",block:"end"});n.isInitBigSliderInPopup===!0&&i()},onInitialized:function(){n.isInitBigSliderInPopup=!0}});var u=12;f.owlCarousel({items:u,nav:!0,dots:!1,navText:["",""],slideBy:u,onInitialized:function(){n.isInitSmallSliderInPopup=!0;f.find(".owl-item").removeClass("synced").eq(0).addClass("synced")}});f.on("click",".owl-item",function(){const n=Number($(this).find(".divclick").data("index"));t(e,n)});f.on("click",".divclick",function(){const n=Number($(this).data("index"));t(e,n)});t(e,n.selectedItemIndex);t(f,n.selectedItemIndex);n.selectedItemIndex=0;$(".sync2 .owl-item").length>0&&(console.log("first thump: synced"),$(".sync2 .owl-item").first().addClass("synced"))}}function d(){if(n.isLoadingImagesInPopup!==!0){var g=ManuInfoPopup();$(".manu-info-popup__content__btn-close").on("click",g.closePopup);$(".parameter__manu").on("click",g.openPopup);setTimeout(function(){console.log("setTimeout_");initManuInfoPopup()},1e3);i();n.isLoadingImagesInPopup=!0;const v=$(this),l=s(v),a=h(v),nt=$(this).attr("data-thump-name");let u=$(p(l,a));const o=document.querySelector(w(l,a)),y=getGalleryType(l);if($(u).hasClass("not-load-content")===!1||document.isCoupleWatch===1&&y===galleryType.specificationGallery&&n.productIdInFullSpecificationTab===document.selectedProductId){$(".block-tab .tab-item").removeClass("active");$(".content-t").removeClass("active");$(this).addClass("active");$(u).addClass("active");c(u);const i=document.querySelector(e(l,a));if(i&&i.scrollIntoView({behavior:"smooth",inline:"center",block:"end"}),o&&($(".block-tab .tab-item").removeClass("active-scroll-to"),$(o).addClass("active-scroll-to"),$(o).hasClass("is-show-popup")===!1&&($(".box01__tab .itemTab").removeClass("active"),$(o).addClass("active"),f(l,a))),n.isLoadingImagesInPopup=!1,n.selectedVideoId&&($(`${".video-gallery"}[data-video-id='${n.selectedVideoId}']`).click(),n.selectedVideoId=""),document.isDesktop===1){const i=$(u).find(".sync1"),r=$(u).find(".sync2");t(i,n.selectedItemIndex);t(r,n.selectedItemIndex);n.selectedItemIndex=0}$("#hdAutoPlayVideo").val()==1&&document.isDesktop===0&&($("#tab-content-videos-gallery-0 a.video-gallery:first-child").trigger("click"),$("#hdAutoPlayVideo").val("0"));return}const d={productId:y!==galleryType.specificationGallery?document.productId:document.selectedProductId,isAppliance:!1,galleryType:y,colorId:a};$.ajax({type:"GET",data:d,url:"/Product/GetGalleryItemInPopup",beforeSend:function(){showLoadingEffect()},success:function(t){if(hideLoadingEffect(),t){r&&clearTimeout(r);const s=$(o).data("is-full-spec")==="True";s===!1||document.isCoupleWatch===0?($(u).removeClass("not-load-content"),u.append(t)):(u.html(t),n.productIdInFullSpecificationTab=d.productId);$(".block-tab .tab-item").removeClass("active");$(".content-t").removeClass("active");$(v).addClass("active");$(u).addClass("active");c(u);d.galleryType==6&&$(".generate-promotion-products").length>0&&$(".generate-promotion-products").each(function(){BuildProductByShortCode(this)});const i=document.querySelector(e(l,a));i&&i.scrollIntoView({behavior:"smooth",inline:"center",block:"end"});o&&($(".box01__tab .itemTab").removeClass("active-scroll-to"),$(o).addClass("active-scroll-to"),$(o).hasClass("is-show-popup")===!1&&($(".box01__tab .itemTab").removeClass("active"),$(o).addClass("active"),f(l,a)),b(v));n.isLoadingImagesInPopup=!1;n.selectedVideoId!==""&&($(`${".video-gallery"}[data-video-id='${n.selectedVideoId}']`).click(),n.selectedVideoId="");k(u);getPolicy();$("#hdAutoPlayVideo").val()==1&&document.isDesktop===0&&($("#tab-content-videos-gallery-0 a.video-gallery:first-child").trigger("click"),$("#hdAutoPlayVideo").val("0"))}},error:function(){hideLoadingEffect();n.isLoadingImagesInPopup=!1}})}}function e(n,t){return`#tab-${n}-${t}`}function g(){n.videoRating===null&&(console.log("getVideoRatingJsFile__"),$.getScript("https://cdn.tgdd.vn/mwgcart/mwgcore/js/bundle/Product/videoRating.min.js?_=1645080188759").done(function(n,t){t==="success"&&(u.data.videoRating=new VideoRating,u.data.videoRating.mounted())}).fail(function(){}))}function l(){$(".block-tab").removeClass("show");showElementScroll(bodyEl);showElementScroll(htmlEl);$("#gb-top-page").show();i()}function a(){n.selectedVideoId=$(this).data("video-id");n.selectedItemIndex=Number($(this).data("index"));u.openPopupGallery();const i=s($(this)),r=h($(this)),f=Number($(this).data("picture-id"));n.imageInSliderBeClickedId=f;const t=$(e(i,r));t&&t.click()}function nt(){const t=$(this).data("video-id"),i=$(this).data("time");console.log("openPopupVideo: "+t+" - "+i);t&&($(".popup-overlay").fadeIn(300),$(".popup-overlay").addClass("active"),youtubePlayer.getInstance().mounted({playerContainerId:"video-player",videoId:t,startTime:i,onStop:function(){n.videoRating&&n.videoRating.showRatingPopup()},onPause:function(){n.videoRating&&n.videoRating.showRatingPopup()},onPlay:function(){n.videoRating&&(n.videoRating.hideRatingPopup(),$(".sync1 .single-item").addClass("hide"))},onReady:function(){$('.article-rating__form input[name="inputLink"]').val(`${location.href}|//www.youtube.com/embed/${t}`);n.videoRating&&n.videoRating.checkIfAlreadyRatingProduct()}}))}function i(){youtubePlayer.getInstance().stopVideo();$(".popup-overlay").fadeOut(300);$(".sync1 .single-item").removeClass("hide");n.videoRating&&n.videoRating.hideRatingPopup()}function tt(){openPopupGallery(galleryTypeId.unboxGallery)}function it(){openPopupGallery(galleryTypeId.articleGallery)}function rt(n){if(n&&n.namespace){let t=n.relatedTarget;$(`.box01__tab .itemTab.thumb-change-image-index-slider[data-index="${t.current()}"]`).click()}}function v(n){if(n){getPolicy();n.on("initialized.owl.carousel",function(t){document.isDesktop===1&&(n.find(".owl-item:not(:first-child)").hide(),document.isDesktop===1&&$(".box01.limit-height").length&&$(".box01.limit-height .detail-slider a.slider-item").height($(".owl-carousel .owl-stage").height()));o(t);$(n).parent(".show-tab").removeClass("loading")});document.isDesktop===0?n.owlCarousel({items:1,loop:!1,dots:!1,nav:!1,autoplay:!1,autoplayHoverPause:!1,lazyLoad:!0,lazyLoadEager:1,autoHeight:!0}):n.owlCarousel({items:1,loop:!1,dots:!1,nav:!0,autoplay:!1,autoplayHoverPause:!1,lazyLoad:!0,navText:["",""],lazyLoadEager:1,autoHeight:$(".box01.limit-height").length<=0});n.on("dragged.owl.carousel",function(n){rt(n)});n.on("translated.owl.carousel",function(n){o(n)});n.on("initialized.owl.carousel changed.owl.carousel",function(t){console.log("initialized.owl.carousel changed.owl.carousel");document.isDesktop===1&&n.find(".owl-item:not(:first-child)").show();o(t)})}}function o(n){if(n.namespace){let t=n.relatedTarget;var i=t.relative(t.current())+1;$(".show-tab a.note").addClass("hide");$(".show-tab a.note.s"+i).removeClass("hide");$(n.target).parent().find(".counter").text("("+i+"/"+t.items().length+")")}}function t(n,t,i=200){const r=$(n);r.owlCarousel();r.trigger("to.owl.carousel",[t,i])}function ut(){if($(this).hasClass("active")!==!0){const n=Number($(this).data("index"));$(".box01__tab .itemTab").removeClass("active");$(this).addClass("active");t($(".show-tab.active .owl-carousel.detail-slider"),n,200)}}function ft(){var n=$(this),t;if(n.hasClass("active-tab"))return!1;t=$(".article__content");t.find("ul.article__content__tab li").removeClass("active-tab");n.addClass("active-tab");n.hasClass("tab-info")&&($(".content-article").addClass("hide"),$(".short-article").removeClass("hide"),$("ul li.tab-info").addClass("active-tab"));n.hasClass("tab-reality")&&($(".short-article").addClass("hide"),$(".content-article").removeClass("hide"),$("ul li.tab-reality").addClass("active-tab"))}function et(){$(".box01__tab .itemTab:not(.thumb-change-image-index-slider)").on("click",y);$(document).on("click",".block-tab .tab-item",d);$(document).on("click",".read-full",a);$(document).on("click",".video-gallery",nt);$(document).on("click",".popup-overlay__popup-video-gallery .close-popup",i);$(document).on("click",".owl-item .slider-item",a);$(document).on("click",".box01__tab .itemTab.thumb-change-image-index-slider",ut);$(document).on("click","ul.article__content__tab li",ft);$(".hinh-mo-hop-link").on("click",tt);$(".block-tab .close-tab").on("click",l);$(".jsArticle").on("click",it);setTimeout(function(){v($(".detail-slider"))},1e3)}const u=this;let r,n={productIdInFullSpecificationTab:document.productId,isLoadingImagesInPopup:!1,isLoadingImagesInSlider:!1,isMounted:!1,imageInSliderBeClickedId:0,selectedVideoId:"",selectedItemIndex:0,scrollTopTimeout:null,isInitBigSliderInPopup:!1,isInitSmallSliderInPopup:!1,videoRating:null};this.data=n;this.mounted=function(){n.isMounted!==!0&&(n.isMounted=!0,et(),$(".show-tab").first().addClass("active"))};this.openPopupGallery=function(){$(".block-tab").addClass("show");hideElementScroll(bodyEl);hideElementScroll(htmlEl);g();$("#gb-top-page").hide();$(".stickcompare.spaceInDown").hide()};this.closePopupGallery=l;this.closePopupVideo=i}function Specification(){function n(){openPopupGallery(galleryTypeId.fullSpecificationGallery)}function t(n){return`.parameter__list.${n}`}function i(){const n=$(this).data("id");$(".parameter__list").removeClass("active");$(".tabparameter__item").removeClass("active");$(t(n)).addClass("active");$(this).addClass("active");document.selectedProductId=n}function r(){$(".parameter__link.collapse").removeClass("active");$(".parameter__link__list-files").addClass("active")}function u(){$(".btn-short-spec").on("click",n);$(".tabparameter__item").on("click",i);$(".parameter__link.collapse").on("click",r)}document.selectedProductId=$(".tabparameter__item.active").data("id");document.selectedProductId||(document.selectedProductId=document.productId);this.mounted=function(){u()}}function initRating(){var t,n;rooturl=document.location.host;$("#hdfRtLink").val(document.location.href);gl_productID=parseInt($("#hdfProductID").val());gl_rt_siteID=parseInt($("#hdfSiteID").attr("value"));$("#hdfIsRatingPage").length>0&&(gl_rt_isRatingPage=1);isMobile!==undefined&&(gl_rt_isMobile=isMobile);readCKLikeCmt();$(".selStr").length>0&&($(".selStr i").unbind(),$(".selStr i").hover(function(){var t,n;for($(".selStr i").removeClass("active"),t=parseInt($(this).attr("id").replace("ss","")),n=0;n<=t;n++)$("#ss"+n).addClass("active")},function(){$(".selStr i").removeClass("active")}));$(".first-rating__rating .rating-product__star").length>0&&($(".first-rating__rating .rating-product__star li").unbind(),$(".first-rating__rating .rating-product__star li").hover(function(){var t,n;for($(".first-rating__rating .rating-product__star li i").removeClass("active"),t=parseInt($(this).attr("id").replace("ss","")),n=0;n<=t;n++)$("#ss"+n+" i").addClass("active")},function(){$(".first-rating__rating .rating-product__star li i").removeClass("active")}));$(".ul-star li").unbind();$(".ul-star li").click(function(){var n,t;for($(".ul-star li i").removeClass("active"),$(".ul-star li p").removeClass("active-slt"),n=parseInt($(this).attr("data-val")),t=0;t<n;t++)$(".ul-star li i").eq(t).addClass("active");$(".ul-star li p").eq(n-1).addClass("active-slt");$("#hdfStar").val(n);$(".ul-orslt, .read-assess-form").show()});$(".ul-orslt li .btn-assess").unbind();$(".ul-orslt li .btn-assess").click(function(){var n=$(this).attr("data-id"),t=$(this).attr("data-val");$(".criteriaID"+n+" .btn-assess").removeClass("checkact");$(this).addClass("checkact");$("#criteriaID"+n).attr("value",t)});$(".input .if [name=fRPhone]").unbind();$(".input .if [name=fRPhone]").keydown(function(n){$.inArray(n.keyCode,[46,8,9,27,13,110,190])!==-1||n.keyCode===65&&(n.ctrlKey===!0||n.metaKey===!0)||n.keyCode>=35&&n.keyCode<=40||(n.shiftKey||n.keyCode<48||n.keyCode>57)&&(n.keyCode<96||n.keyCode>105)&&n.preventDefault()});$(".ratingLst li .sttB").unbind();$(".ratingLst li .sttB").click(function(){var n=$(this).parents("li").attr("id");$("#"+n).find(".rcf").is(":visible")?$("#"+n).find(".rcf").hide():$("#"+n).find(".rcf").show()});$(".ratingLst .par").each(function(){var n=$(this).attr("id"),t;n=n.replace("r-","");t=$(".ratingLst .rp-"+n).length;t>0&&$(this).find(".cmtr").html(t+" thảo luận")});t="tgdd_fullname";gl_rt_siteID==2&&(t="dm_fullname");n=getCookie(t);n!=null&&n!=""&&(n=Htmlentities(n),$(".ratingLst .ifrl").each(function(){$(this).find("span").html(decodeURI(n));$(this).find("a").html("Sửa tên")}));$(".ratingLst li").length==0&&$(".frtip .ipt").removeClass("hide");$(".click-use").unbind();$(".click-use").click(function(n){n.preventDefault();$(this).toggleClass("act")});$(".frtip .toprt .c").each(function(){var n=$(this).find("strong").html();n=parseInt(n);n==0&&($(this).attr("onclick",""),$(this).addClass("n"))});$(".srhRtTxt").length>0&&$(".srhRtTxt").unbind().click(function(){$(".frtip .wrap_seasort").slideToggle()});$(".txt-agree").unbind();$(".txt-agree").click(function(){var n=parseInt($("#hdfIsShare").val());$(".txt-agree").removeClass("selected");n===1?$("#hdfIsShare").val(0):n===0&&($("#hdfIsShare").val(1),$(".txt-agree").addClass("selected"))});$(".icon-dots").unbind();$(".icon-dots").on("click",function(n){n.preventDefault();$(this).next(".comment__item .txt-dots").fadeToggle(300)});$(".txt-dots").unbind();$(".txt-dots").click(function(){$(".show-history").fadeIn(400);$("body").css({overflow:"hidden"})});$(".close-history,.close-history-href").unbind();$(".close-history,.close-history-href").click(function(){$(".show-history").fadeOut(400);$("body").css({overflow:"scroll"});$(".comment__item .txt-dots").hide();gl_rt_isMobile||($(".locationbox__overlay").hide(),$(".bgback").removeClass("showbg"))});$(".c-checkitem").unbind();$(".c-checkitem").on("click",function(){$(this).toggleClass("act-check");var n=parseInt($(this).attr("data-val"));n==0?$(this).attr("data-val",1):$(this).attr("data-val",0);ratingCmtList(1,0)});$(".boxsort__click-show").unbind();$(".boxsort__click-show").click(function(){$(this).toggleClass("active");$(".boxsort__list").fadeToggle(200)});$(".boxsort__list li").unbind();$(".boxsort__list li").click(function(){$(".boxsort").attr("data-val",$(this).attr("data-val"));$(".boxsort__click-show").html(`Xếp theo: ${$(this).html()}`);$(".boxsort__click-show").toggleClass("active");$(".boxsort__list li").removeClass("active");$(this).addClass("active");$(".boxsort__list").fadeToggle(200);ratingCmtList(1,0)});calSizeThumpRtImg();$(".rating-img-rd").click(function(){gl_rt_isMobile?($(".gallery").addClass("showGlr"),$("body").css({overflow:"hidden"})):($(".gallery").addClass("showGlr"),$("body").css({overflow:"hidden"}),$(".bgback").addClass("showbg"),$(".locationbox__overlay").show())});$(".gallery-close").click(function(){gl_rt_isMobile?($(".gallery").removeClass("showGlr"),$("body").css({overflow:"scroll"})):($(".bgback").removeClass("showbg"),$(".show-comment").removeClass("blockshow").addClass("hide"),$(".gallery").removeClass("showGlr"),$(".locationbox__overlay").hide())});$(".gallery__tab a").click(function(n){n.preventDefault();$(".gallery__tab a").removeClass("act");var t=$(this).attr("href");t=t.substr(1);$(this).addClass("act");$(".gallery__content li").each(function(){$(this).hasClass(t)||t=="all"?$(this).removeClass("hide"):$(this).addClass("hide")})})}function initRtSlide(){if(gl_rt_isMobile)console.log("slide m_111"),$(".show-comment-main").owlCarousel({lazyLoad:!0,items:1,loop:!0,dots:!1,autoplay:!1,nav:!0,autoHeight:!0});else{console.log("slide d_1");var n=$("#cmt_sync1"),t=$("#cmt_sync2");n.owlCarousel({lazyLoad:!0,items:1,singleItem:!0,slideSpeed:1e3,nav:!0,dots:!1,navigationText:["",""],pagination:!1,responsiveRefreshRate:200});n.on("changed.owl.carousel",function(n){console.log("slide1 change: "+n.item.index);$("#cmt_sync2").trigger("to.owl.carousel",n.item.index)});t.owlCarousel({items:1,itemsDesktop:[1199,1],itemsDesktopSmall:[979,1],pagination:!1,responsiveRefreshRate:100});t.on("changed.owl.carousel",function(n){console.log("slide2 change: "+n.item.index);$("#cmt_sync1").trigger("to.owl.carousel",n.item.index)})}}function getOverrideScript(){if(gl_isGetScript)return!1;gl_rt_isRatingPage==1?typeof initUploadRatingImg=="function"&&(console.log("getOverrideScript jsOvrCmt_detail"),initUploadRatingImg(),gl_isGetScript=!0):(typeof initUploadRatingImg=="function"&&(console.log("getOverrideScript jsOvrCmt_detail"),initUploadRatingImg()),gl_isGetScript=!0)}function showRatingCmtChild(n){var t=n.replace("r-",""),i,r;$(".rp-"+t).removeClass("hide");$(".rr-"+t).removeClass("hide");i="tgdd_fullname";gl_rt_siteID==2&&(i="dm_fullname");r=getCookie(i);(r==null||r=="")&&$(".rr-"+t+" .ifrl").removeClass("hide").addClass("hide")}function likeRating(n){var t={id:n},i=window.location.origin+"/Rating/LikeRating/";$.ajax({url:i,type:"POST",data:t,cache:!1,beforeSend:function(){},success:function(t){var i,r;if(t!=null||t!="")try{i=parseInt($("#r-"+n+" .click-like").attr("data-like"));i++;$("#r-"+n).attr("data-like",i);r="<i class='icondetail-like'><\/i> Hữu ích ("+i+")";$("#r-"+n+" .click-like").html(r);$("#r-"+n+" .click-like").attr("href","javascript:;");updateCKLikeCmt(n)}catch(u){console.log(u)}},error:function(){}})}function updateCKLikeCmt(n){var i="tgdd_cmtlike",t;if(gl_rt_siteID==2&&(i="dmx_cmtlike"),t=getCookie(i),t!==undefined&&t!==null&&t!==""){for(var u=!0,r=0,f=t.split("-"),r=0;r<f.length;r++)parseInt(n)===parseInt(f[r])&&(u=!1);u&&(t=t+"-"+n,CreateCookie(i,t,1))}else CreateCookie(i,n,1)}function readCKLikeCmt(){var r="tgdd_cmtlike",t,n,i;if(gl_rt_siteID===2&&(r="dmx_cmtlike"),t=getCookie(r),t!==undefined&&t!==null&&t!=="")for(n=0,i=t.split("-"),n=0;n<i.length;n++)$("#r-"+i[n]).length>0&&($("#r-"+i[n]+" .click-like").attr("href","javascript:;"),$("#r-"+i[n]+" .click-like").html("<i class='icondetail-like'><\/i> Hữu ích (1)"))}function ratingMore(n,t){var i=5,r,u;t!=null&&t>=0&&(i=t,gl_rtCurStar=t);r={productid:gl_productID,page:n,score:i};u="/aj/Rating/RatingCommentList/";POSTAjax(u,r,function(){},function(t){if(t!=null||t!="")try{$(".ratingMore").remove();n==1?$(".ratingLst").html(t):$(".ratingLst").append(t);initRating();$("img.lazy").trigger("sporty")}catch(i){}},function(){},!0)}function submitRatingComment(){if(!gl_sendRating){if(gl_sendRating=!0,!validateRating()){gl_sendRating=!1;return}var n=$(".frtip"),t=n.serialize(),i=window.location.origin+"/Rating/SubmitRatingComment/";$.ajax({url:i,type:"POST",data:t,cache:!1,beforeSend:function(){showloading()},success:function(t){if(t!=null||t!="")try{initRating();gl_sendRating=!1;var i=$("#hdfRtImg").val();if(t.res==1){parseInt(t.resCmt)>0&&i!=null&&i!=""&&(console.log("rtMoveFile: "+i),rtMoveFile(i,t.resCmt),hideloading());let r=n.find(".box-cmt-popup .info-pro"),f;f=gl_rt_siteID==1?{name:r.data("name"),id:r.data("id"),price:r.data("price"),brand:r.data("brand"),category:r.data("category"),reviewWithPhoto:i!=null&&i!=""?"Yes":"No",anonymousReview:parseInt(t.resIsBuy)==0||document.zNSRating?"Yes":"No",productName:r.data("name"),rateTotal:n.find("input[name=hdfStar]").val(),productPrice:r.data("price"),dimension33:$(".breadcrumb li a").eq(0).length>0?$(".breadcrumb li a").eq(0).text():"",dimension34:$(".breadcrumb li a").eq(1).length>0?$(".breadcrumb li a").eq(1).text():"",dimension35:"",dimension36:r.data("price"),dimension43:n.find("input[name=hdfStar]").val(),userID:document.zNSRating?document.zNSRating.customerId:"",reviewSource:document.zNSRating?"Zalo":"Web",daysToInvited:document.zNSRating?document.zNSRating.daysToInvited:"",templateID:document.zNSRating?document.zNSRating.templateId:""}:{name:r.data("name"),id:r.data("id"),price:r.data("price"),brand:r.data("brand"),category:r.data("category"),reviewWithPhoto:i!=null&&i!=""?"Yes":"No",anonymousReview:parseInt(t.resIsBuy)==0||document.zNSRating?"Yes":"No",productName:r.data("name"),rateTotal:n.find("input[name=hdfStar]").val(),productPrice:r.data("price"),dimension50:$(".breadcrumb li a").eq(0).length>0?$(".breadcrumb li a").eq(0).text():"",dimension51:$(".breadcrumb li a").eq(1).length>0?$(".breadcrumb li a").eq(1).text():"",dimension52:"",dimension53:r.data("price"),dimension60:n.find("input[name=hdfStar]").val(),userID:document.zNSRating?document.zNSRating.customerId:"",reviewSource:document.zNSRating?"Zalo":"Web",daysToInvited:document.zNSRating?document.zNSRating.daysToInvited:"",templateID:document.zNSRating?document.zNSRating.templateId:""};let e={event:"formSubmissionSuccess",formSubmissionSuccess:f};dataLayer.push(e);alert("Đánh giá của bạn sẽ được hệ thống kiểm duyệt. Xin cám ơn.");let u=$(".first-rating");if(u.length>0){let t=n.find("input[name=fRName]").val(),r=n.find("input[name=hdfStar]").val(),i=u.find(".first-rating__rating--success .rating-product__star li:nth-child(-n+"+parseInt(r)+")");if(i.find("i").addClass("active"),u.find(".first-rating__rating--success span").text(i.last().data("text")),t!=null&&t.trim()!=""){let n=u.find(".first-rating__rating--success p").first();n.text(n.text().replace("bạn",t))}u.find(".first-rating__title").hide();u.find(".first-rating__rating").hide();u.find(".first-rating__title--success").show();u.find(".first-rating__rating--success").show()}resetRating();console.log("resetRating: "+i);hideInputRating();closeFeedback();hideloading()}else t.res==0&&alert(t.mes);hideloading()}catch(r){gl_sendRating=!1;hideloading()}},error:function(){gl_sendRating=!1;hideloading()}})}}function ratingRelply(n){var i,r,t,u,f;if(gl_sendRating)return!1;if(gl_sendRating=!0,i=$.trim($(".rr-"+n).find("input").val()),i==null||i=="")return gl_sendRating=!1,alert("Vui lòng nhập nội dung cần thảo luận"),!1;if(r="tgdd_fullname",gl_rt_siteID==2&&(r="dm_fullname"),t=getCookie(r),t==null||t=="")return gl_sendRating=!1,showReplyConfirmPopup(),!1;u={productid:gl_productID,commentid:n,content:$(".rr-"+n).find("input").val(),name:t,siteID:gl_rt_siteID};f=window.location.origin+"/Rating/SubmitRatingReply/";$.ajax({url:f,type:"POST",data:u,cache:!1,beforeSend:function(){$("#dlding").show()},success:function(n){if(n!=null||n!="")try{n.res==1&&($(".ratingLst .reply input").val(""),alert("Thảo luận của bạn sẽ được hệ thống kiểm duyệt. Xin cám ơn."));gl_sendRating=!1}catch(t){}hideloading()},error:function(){gl_sendRating=!1;hideloading()}})}function rCmtEditName(){showReplyConfirmPopup()}function clearBorder(){$(".frtip .ct").removeClass("borderWn");$(".frtip .if input").removeClass("borderWn")}function validateRating(){var n,i,t;return(clearBorder(),$(".lbMsgRt").removeClass("hide"),n=$.trim($(".input [name=fRContent]").val()),i=parseInt($("#hdfStar").val()),i==0)?($(".lbMsgRt").html("Bạn chưa đánh giá điểm sao, vui lòng đánh giá."),paddingForm(),!1):(n==null||n=="")&&confirm("Chờ đã! Nội dung chưa được nhập, bạn sẵn lòng nhập thêm chứ?")?($(".frtip .ct").focus(),!1):(n=$.trim($(".input [name=fRName]").val()),n==null||n=="")?($(".lbMsgRt").html("Vui lòng nhập họ tên"),$(".input [name=fRName]").addClass("borderWn"),paddingForm(),!1):(n=$.trim($(".input [name=fRPhone]").val()),n==null||n=="")?($(".lbMsgRt").html("Vui lòng nhập số điện thoại."),$(".input [name=fRPhone]").addClass("borderWn"),paddingForm(),!1):$(".ul-orslt li").length>0&&(t=$(".ul-orslt .checkact").length,t>0&&t!=$(".ul-orslt li").length)?($(".lbMsgRt").html("Vui Lòng chọn tất cả các tiêu chí"),paddingForm(),!1):($(".lbMsgRt").removeClass("hide").addClass("hide"),!0)}function paddingForm(){gl_rt_isMobile&&$(".read-assess-form").css("padding-bottom",`${$(".submit-container").outerHeight()}px`)}function rSelGender(n,t){$(".rCfmInfo .cgd i").removeClass("icondetail-radcheck").addClass("icondetail-rad");$(n).find("i").removeClass("icondetail-rad").addClass("icondetail-radcheck");$(".rCfmInfo").attr("data-gender",t)}function resetRating(){console.log("rs rt");clearBorder();$(".ul-star li i").removeClass("active");$(".ul-star li p").removeClass("active-slt");$(".ul-orslt .btn-assess").removeClass("checkact");$("#hdfStar").val("0");$(".input [name=fRContent]").val("");$(".input [name=fRName]").val("");$(".input [name=fRPhone]").val("");$(".input [name=fREmail]").val("");$(".rsStar").html("");$(".rsStar").addClass("hide");$(".lbMsgRt").html("");$(".resRtImg").html("");$(".resRtImg").addClass("hide");$("#hdfRtImg").val("")}function countTxtRating(){var n=$(".frtip textarea").val().length,t;n>0&&n<80?(t=n+" ký tự (tối thiểu 80)",$(".mintext").html(t)):$(".mintext").html("")}function getImgRating(){if($(".resImg li").length>0){var n="";$(".resImg li").each(function(){var t=$(this).attr("data-imgname");t!=null&&t!=""&&(n+=t+"╬")});$(".hdfRatingImg").val(n)}}function checkPopupRating(){setTimeout(function(){var t=getUrlParameter("popuprating"),n,i,r;t!=null&&t!=""?(console.log("popuprating: "+t),n=t.split("-"),n.length>2&&n[0]==1&&($(".frtip").remove(),$(".fsrt").remove(),$(".wrap_fdback").removeClass("hide"),$(".wrap_fdback form.input").show(),i=n[1],r=n[2],i!=null&&i!=""&&($(".wrap_fdback .input [name='fRName']").val(i),$(".wrap_fdback .input [name='fRPhone']").val(r)))):$(".wrap_fdback").remove()},1e3)}function ratingSearch(){var n,t,i,r;if(console.log("ratingSearch0618_m"),n=$(".cmtKey").val(),n=$.trim(n),n===null||n===""||n.length<3)return!1;t=$(".rtpLnk").attr("data-orgLnk")+"?key="+encodeURI(n);$(".rtpLnk").prop("href",t);gl_sendRating=!0;i=window.location.origin+"/Rating/SearchRating/";r={sKey:n,productID:gl_productID};$.ajax({url:i,type:"POST",data:r,cache:!1,beforeSend:function(){},success:function(n){(n!==null||n!=="")&&($(".rFound").remove(),$(".rtPage .ratingLst").remove(),$(".rtPage .pgrc").remove(),gl_rt_isMobile?$(".rtPage .boxsort").after(n):$(".rtPage .content-wrap .rtFilter").after(n),gl_sendRating=!1);$(".frtip .wrap_seasort").hide()},error:function(){gl_sendRating=!1}})}function showRtHis(n){$(".rtHislbl").addClass("hide");$("#r-"+n+" .rtHislbl").removeClass("hide")}function rtHis(n){var t={cmtID:n,productID:gl_productID},i=window.location.origin+"/Rating/GetRatingHistory/";$(".wrap_His .hList").html("");$.ajax({url:i,type:"POST",data:t,cache:!1,beforeSend:function(){},success:function(n){(n!==null||n!=="")&&($(".ratingLst").after(n),$(".show-history").fadeIn(400),gl_rt_isMobile||($(".bgback").addClass("showbg"),gl_rt_isRatingPage||$(".locationbox__overlay").show()),initRating())},error:function(){}})}function closePopupRating(){$(".wrap_wrtp").removeClass("hide").addClass("hide")}function showRtImgListPop(){console.log("showRtImgListPop_");gl_rt_isMobile?($(".gallery").addClass("showGlr"),$("body").css({overflow:"hidden"})):($(".gallery").addClass("showGlr"),$("body").css({overflow:"hidden"}),$(".bgback").addClass("showbg"),$(".locationbox__overlay").show());$(".show-comment").removeClass("blockshow")}function getFileUpload(){gl_isFeedbackLoad||$.getScript("/lib/jquery-upload/jquery.html5uploader.min.js?v=20220613").done(function(){gl_isFeedbackLoad=!0;initUploadRating()})}function getUrlParameter(n){for(var u=decodeURIComponent(window.location.search.substring(1)),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:t[1]}function ratingCmtList(n,t){var i,r,u,f,e,o;console.log("ratingCmtList_");$(".cmtKey").val("");$(".rFound").length>0&&$(".rFound").remove();i=gl_rtCurStar;t!==null&&t>=0?(i=t,gl_rtCurStar=t):gl_rtCurStar>=0&&(t=gl_rtCurStar);gl_rt_currentPage=parseInt(n);gl_rtCurStar=parseInt(t);r=0;$(".cIsImg").length>0&&(r=parseInt($(".cIsImg").attr("data-val")));r===1&&(gl_rt_currentImg=!0);u=0;$(".cIsBuy").length>0&&(u=parseInt($(".cIsBuy").attr("data-val")));f=0;$(".boxsort").length>0&&(f=parseInt($(".boxsort").attr("data-val")));gl_rt_currentOrder=parseInt($(".frtip .ftR .o").attr("data-order"));gl_rt_currentPage=n;e={productid:gl_productID,page:n,score:i,iIsImage:r,iIsBuy:u,iOrder:f};o=window.location.origin+"/Rating/RatingCommentList/";$(".frtip .ftR .s").removeClass("act");$(".frtip .ftR .s"+t).addClass("act");showloading();$.ajax({url:o,type:"POST",data:e,cache:!1,beforeSend:function(){$("#dlding").show()},success:function(n){if(n!=null||n!="")try{$(".rtPage .ratingLst").remove();$(".rtPage .pgrc").remove();gl_rt_isMobile?$(".rtPage .boxsort").after(n):$(".rtPage .content-wrap .rtFilter").after(n);$(".rtPage .filter-choose").length>0&&($(".rtPage .filter-choose a").removeClass("active"),$(".rtPage .filter-choose .rtF"+i).addClass("active"));$(".rtPage .list .rtQRp").remove();$(".wrap_slide .rat").remove();initRating();reloadRatingUrl();reInitRatingImg();$("img.lazy").trigger("sporty");hideloading();$("html, body").animate({scrollTop:$(".boxsort").offset().top-20},"slow")}catch(t){console.log(t);hideloading()}},error:function(){}})}function showloading(){$(".loadingcover").show()}function hideloading(){$(".loadingcover").hide()}function reloadRatingUrl(){removeURLParameter("s");removeURLParameter("i");removeURLParameter("o");removeURLParameter("p");gl_rtCurStar!==null&&gl_rtCurStar>0&&window.history.replaceState("","",updateURLParameter(window.location.href,"s",gl_rtCurStar));gl_rt_currentImg!==null&&gl_rt_currentImg&&window.history.replaceState("","",updateURLParameter(window.location.href,"i","1"));gl_rt_currentOrder!==null&&gl_rt_currentOrder>0&&window.history.replaceState("","",updateURLParameter(window.location.href,"o",gl_rt_currentOrder));gl_rt_currentPage!==null&&gl_rt_currentPage>0&&window.history.replaceState("","",updateURLParameter(window.location.href,"p",gl_rt_currentPage))}function reInitRatingImg(){$(".ratingLst .isBuy .rat img").attr("onclick","");$(".ratingLst .isBuy .rat img").unbind();$(".ratingLst .isBuy .rat img").click(function(){console.log("img click_");$(".wrap_slide").removeClass("hide");var n=$(this).attr("data-id");$(".wrap_slide .item img").each(function(t){$(this).attr("data-id")===n&&setTimeout(function(){var n=$(".owl-carousel");n.trigger("owl.goTo",t)},100)})});$(".wrap_fullImg img").unbind();$(".wrap_fullImg img").click(function(){console.log("img click_2");$(".wrap_fullImg").removeClass("hide").addClass("hide");$(".wrap_slide").removeClass("hide");var n=$(this).attr("data-id");$(".wrap_slide .item img").each(function(t){$(this).attr("data-id")===n&&setTimeout(function(){var n=$(".owl-carousel");n.trigger("owl.goTo",t)},100)})})}function goToRSlideByAttID(n){$(".rtAtt-"+n).click()}function goToRSlide(n){initRtSlide();gl_rt_isMobile?($(".show-comment").removeClass("hide").addClass("blockshow"),$("body").css({overflow:"hidden"}),$("html").css({overflow:"hidden"})):($(".gallery").removeClass("showGlr"),$(".show-comment").removeClass("hide").addClass("blockshow"),$(".bgback").addClass("showbg"),$("body").css({overflow:"hidden"}),gl_rt_isRatingPage||$(".locationbox__overlay").show());$(".locationbox__overlay").show();var n=parseInt(n);n>0&&(gl_rt_isMobile?$(".show-comment-main").trigger("to.owl.carousel",n-1):$("#cmt_sync1").trigger("to.owl.carousel",n-1))}function updateURLParameter(n,t,i){var e="",r=n.split("?"),h=r[0],o=r[1],f="",u,s;if(o)for(r=o.split("&"),u=0;u<r.length;u++)r[u].split("=")[0]!=t&&(e+=f+r[u],f="&");return s=f+""+t+"="+i,h+"?"+e+s}function removeURLParameter(n){var t=document.location.href,u=t.split("?"),r;if(u.length>=2){var f=u.shift(),e=u.join("?"),o=encodeURIComponent(n)+"=",i=e.split(/[&;]/g);for(r=i.length;r-->0;)i[r].lastIndexOf(o,0)!==-1&&i.splice(r,1);t=f+"?"+i.join("&");window.history.pushState("",document.title,t)}return t}function showInputRating(n){gl_rt_isMobile?$(".read-assess").removeClass("hide").addClass("blockshow"):($(".read-assess").removeClass("hide").addClass("showR"),$(".locationbox__overlay").show());parseInt(n)>0&&$(".ul-star li").each(function(){parseInt($(this).attr("data-val"))<=n&&$(this).click()});getOverrideScript()}function hideInputRating(){$("#hdfStar").val()>0?confirm("Chờ đã! Bạn chưa gửi đánh giá, bạn có có muốn gửi đi không?")?submitRatingComment():closeRatingForm():closeRatingForm()}function closeRatingForm(){$(".frtip .input").fadeOut();$(".frtip .cipRating").removeClass("hide").addClass("hide");$(".frtip .sRt").removeClass("hide");$(".lnkFbk").removeClass("hide");$(".frtip .fsrt a").attr("href","javascript:showInputRating()");$(".frtip .fsrt a span").html("Gửi đánh giá của bạn");gl_rt_isMobile?$(".read-assess").removeClass("blockshow").addClass("hide"):($(".read-assess").removeClass("showR").addClass("hide"),$(".locationbox__overlay").hide())}function closeRtGallery(){$(".bgback").removeClass("showbg");$(".show-comment").removeClass("blockshow").addClass("hide");$("body").css({overflow:""});$("html").css({overflow:""});gl_rt_isMobile||gl_rt_isRatingPage?$(".locationbox__overlay").length>0&&$(".locationbox__overlay").hide():$(".locationbox__overlay").hide()}function showReplyConfirmPopup(){var r="tgdd_fullname",u="tgdd_email",f="tgdd_gender",e="tgdd_phone";gl_rt_siteID==2&&(r="dm_fullname",u="dm_email",f="dm_gender",e="dm_phone");var n=getCookie(r),t=getCookie(u),i=getCookie(e),o=getCookie(f);n!=null&&n!=""&&(n=Htmlentities(n),$(".cfmUserName").val(n));t!=null&&t!=""&&$(".cfmUserEmail").val(t);i!=null&&i!=""&&$(".cfmPhone").val(i);parseInt(o)==1&&$(".c_male").click();parseInt(o)==2&&$(".c_female").click();gl_rt_isMobile?$(".rRepPopup").removeClass("hide").addClass("blockshow"):($(".rRepPopup").removeClass("hide").addClass("blockshow"),$(".locationbox__overlay").show())}function rCmtConfirmUser(){var u="tgdd_fullname",f="tgdd_email",e="tgdd_gender",o="tgdd_phone",n,t,i,r;gl_rt_siteID==2&&(u="dm_fullname",f="dm_email",e="dm_gender",o="dm_phone");n=$(".cfmUserName").val();n!=null&&n!=""&&(n=Htmlentities(n),CreateCookie(u,n));t=$(".cfmUserEmail").val();t!=null&&t!=""&&CreateCookie(f,t);i=$(".cfmPhone").val();i!=null&&i!=""&&CreateCookie(o,i);r=parseInt($(".rCfmInfo").attr("data-gender"));(r==1||r==2)&&CreateCookie(e,r);$(".ifrl span").html(n);$(".ifrl").removeClass("hide");$(".ifrl a").html("Sửa tên");hideReplyConfirmPopup()}function hideReplyConfirmPopup(){$(".rRepPopup").removeClass("blockshow").addClass("hide");gl_rt_isMobile||$(".locationbox__overlay").hide()}function hideRtContentText(){var n=310;gl_rt_isRatingPage!=1||gl_rt_isMobile||(n=600);$(".ratingLst .comment-content").each(function(){if($(this).find(".cmt-txt").length>0&&$(this).find(".cmt-txt").html().length>n){$(this).find(".cmt-txt").addClass("hideRtCt");var t=$(this).parent().attr("id");$(this).after("<span class='sRtXt' onclick='showFullRtCt(this)'>Xem tiếp ▾ <\/span>")}});$(".show-comment-main .comment-content").each(function(){var n;$(this).find(".cmt-txt").length>0&&$(this).find(".cmt-txt").html().length>120&&gl_rt_isMobile&&($(this).find(".cmt-txt").addClass("hideRtCt"),n=$(this).attr("data-id"),$(this).after('<span class="sRtXt sRtXt'+n+'" onclick="showFullRtCtPop(\''+n+"')\">Xem tiếp ▾ <\/span>"));$(this).find(".cmt-txt").length>0&&$(this).find(".cmt-txt").html().length>825&&!gl_rt_isMobile&&($(this).find(".cmt-txt").addClass("hideRtCt"),n=$(this).attr("data-id"),$(this).after('<span class="sRtXt sRtXt'+n+'" onclick="showFullRtCtPop(\''+n+"')\">Xem tiếp ▾ <\/span>"))})}function showFullRtCt(n){var t=$(n).parent().attr("id");$("#"+t+" .cmt-txt").removeClass("hideRtCt");$(n).remove()}function showFullRtCtPop(n){$(".crtipu-"+n+" .cmt-txt").removeClass("hideRtCt");$(".sRtXt"+n).remove()}function calSizeThumpRtImg(){if(gl_rt_isMobile&&window.screen.width>=320&&window.screen.width<=640){var n=window.screen.width/5-8;$(".rtPage .rating-img .rating-img-list .js-Showcmt img").each(function(){$(this).css("width",n+"px");$(this).css("height",n+"px")})}}function cmtValidateEmail(n){return/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(n)}function Htmlentities(n){return n.replace(/[\u00A0-\u9999<>\&]/g,function(n){return"&#"+n.charCodeAt(0)+";"})}function CreateCookie(n,t,i){var r=new Date,u;r.setDate(r.getDate()+i);u=escape(t)+(i==null?"":"; visited=true; path=/; domain="+rooturl+"; expires="+r.toUTCString()+";");document.cookie=n+"="+u}function CreateCookieWithHour(n,t,i){var r=new Date,u;r.setMinutes(r.getMinutes()+i);u=escape(t)+(i==null?"":"; visited=true; path=/; domain="+rooturl+"; expires="+r.toUTCString()+";");document.cookie=n+"="+u}function Delete_Cookie(n,t,i){getCookie(n)&&(document.cookie=n+"="+(t?";path="+t:"")+(i?";domain="+i:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT")}function getModelTracking(){var n={name:"",id:"",price:"",brand:"",category:"",variant:"",quantity:1,productCategorylv1:"",productCategorylv2:"",productType:"",productOriginPrice:"",productDiscount:"",productAvailability:"",productDimension:"",productWeight:"",productOrigin:"",productYear:"",productReviewPoint:"",productReviewNumber:"",productReviewVideo:"",productPromoyionType:"",orderType:"",serviceOrder:"False",isOLOL:"False",site:1},t,i;$("#jsonProductGTM").val()!==undefined&&(t=JSON.parse($("#jsonProductGTM").val()),t!==undefined&&(n.name=t.name,n.id=t.sku,t.brand!=null&&t.brand.name[0]!=undefined&&(n.brand=t.brand.name[0]),t.aggregateRating!==null&&(n.productReviewNumber=t.aggregateRating.reviewcount,n.productReviewPoint=t.aggregateRating.ratingValue)));i=JSON.parse($("script#breadcrumb").text());i!==undefined&&i.itemListElement!==null&&(i.itemListElement[2]!==undefined&&(n.productCategorylv1=i.itemListElement[2].item.name),i.itemListElement[3]!==undefined&&(n.productCategorylv2=i.itemListElement[3].item.name));$("#productReviewVideoGTM").val()!==undefined&&(n.productReviewVideo=$("#productReviewVideoGTM").val());$("#productAvailabilityGTM").val()!==undefined&&(n.productAvailability=$("#productAvailabilityGTM").val());$("#productCategoryGTM").val()!==undefined&&(n.category=$("#productCategoryGTM").val());$("#productIsOLOLGTM").val()!==undefined&&(n.isOLOL=$("#productIsOLOLGTM").val());var r=0,u=0,f=0;return $("#DisPriceScenrioGTM").val()!==undefined&&(r=parseFloat($("#DisPriceScenrioGTM").val()),u=parseInt($("#PercentScenrioGTM").val())),r==0&&$("#DisPriceGTM").val()!==undefined&&(r=parseFloat($("#DisPriceGTM").val()),u=parseInt($("#PercentGTM").val())),$("#PriceOriginGTM").val()!==undefined&&(f=parseFloat($("#PriceOriginGTM").val())),$("#productSiteGTM").val()!==undefined&&(n.site=parseFloat($("#productSiteGTM").val())),n.price=r,n.productDiscount=u,n.productOriginPrice=f,n}function gtm_pageViewProduct(){var t="",i="",r="",n=JSON.parse($("script#breadcrumb").text());n!==undefined&&n.itemListElement!==undefined&&(n.itemListElement[1]!==undefined&&(t=n.itemListElement[1].item.name),n.itemListElement[2]!==undefined&&(i=n.itemListElement[2].item.name),n.itemListElement[3]!==undefined&&(r=n.itemListElement[3].item.name));dataLayer.push({pageType:"Product",pagePlatform:"Web",pageCategoryLv1:t,pageCategoryLv2:i,pageCategoryLv3:r})}function gtm_ProductDetailView(){var n,t,i;if(dataLayer===undefined){alert("dataLayer chưa khai báo");return}n=getModelTracking();n.site==1?(console.log("TGDD"),t=[{name:n.name,id:n.id.toString(),price:n.price.toString(),brand:n.brand,category:n.category,dimension50:n.productCategorylv1,dimension51:n.productCategorylv2,dimension52:n.productType,dimension53:n.productOriginPrice.toString(),dimension54:n.productDiscount.toString(),dimension55:n.productAvailability,dimension56:n.productDimension,dimension57:n.productWeight,dimension58:n.productOrigin,dimension59:n.productYear,dimension60:n.productReviewPoint.toString(),dimension61:n.productReviewNumber.toString(),dimension62:n.productReviewVideo,dimension48:n.isOLOL}]):t=[{name:n.name,id:n.id.toString(),price:n.price.toString(),brand:n.brand,category:n.category,dimension33:n.productCategorylv1,dimension34:n.productCategorylv2,dimension35:n.productType,dimension36:n.productOriginPrice.toString(),dimension37:n.productDiscount.toString(),dimension16:n.productAvailability,dimension38:n.productDimension,dimension39:n.productWeight,dimension40:n.productOrigin,dimension41:n.productYear,dimension43:n.productReviewPoint.toString(),dimension44:n.productReviewNumber.toString(),dimension45:n.productReviewVideo,dimension55:n.isOLOL}];i={event:"productDetail",serviceOrder:n.serviceOrder,ecommerce:{detail:{products:t}}};dataLayer.push(i)}function gtm_ProductAddtoCart(n){var t,i;if(dataLayer===undefined){alert("dataLayer chưa khai báo");return}n.site==1?(console.log("TGDD"),t=[{name:n.name,id:n.id.toString(),price:n.price.toString(),brand:n.brand,category:n.category,variant:n.variant,quantity:n.quantity,dimension50:n.productCategorylv1,dimension51:n.productCategorylv2,dimension52:n.productType,dimension53:n.productOriginPrice.toString(),dimension54:n.productDiscount.toString(),dimension55:n.productAvailability,dimension56:n.productDimension,dimension57:n.productWeight,dimension58:n.productOrigin,dimension59:n.productYear,dimension60:n.productReviewPoint.toString(),dimension61:n.productReviewNumber.toString(),dimension62:n.productReviewVideo,dimension63:n.productPromoyionType,dimension48:n.isOLOL}]):t=[{name:n.name,id:n.id.toString(),price:n.price.toString(),brand:n.brand,category:n.category,variant:n.variant,quantity:n.quantity,dimension33:n.productCategorylv1,dimension34:n.productCategorylv2,dimension35:n.productType,dimension36:n.productOriginPrice.toString(),dimension37:n.productDiscount.toString(),dimension16:n.productAvailability,dimension38:n.productDimension,dimension39:n.productWeight,dimension40:n.productOrigin,dimension41:n.productYear,dimension43:n.productReviewPoint.toString(),dimension44:n.productReviewNumber.toString(),dimension45:n.productReviewVideo,dimension42:n.productPromoyionType,dimension55:n.isOLOL}];i={event:"productAddToCart",orderType:n.orderType,serviceOrder:n.serviceOrder,ecommerce:{add:{products:t}}};dataLayer.push(i)}function GetProductScrollDetail(){var n=null,t=null;$(".acc").length>0&&(t=$(".acc").offset().top);$(".sameproduct").length>0&&(n=$(".sameproduct").offset().top);$(window).scroll(()=>{var r=$(".acc .listproduct .active .item > a"),i;(r==undefined||r==""||r.length<1)&&(r=$(".acc .listproduct li > a"));i=$(".sameproduct .listproduct .active .item > a.box-product");(i==undefined||i==""||i.length<1)&&(i=$(".sameproduct .listproduct li > a.box-product"));$(".sameproduct").length>0&&(flagGetProductScrollSameProduct=ComparePosition(n,i,flagGetProductScrollSameProduct,"Sản phẩm liên quan"));$(".acc").length>0&&(flagGetProductScrollAcc=ComparePosition(t,r,flagGetProductScrollAcc,"Phụ kiện liên quan"))})}function ComparePosition(n,t,i,r){if(i)return!0;var u=$(this).scrollTop();return u>=n-200&&u<=n+screen.height&&t.length>0?(addListProductIntoImpression(t,r,10),!0):!1}function AddFacebookLikeBox(){setTimeout(function(){$(".like-fanpage").each(function(){var n=$(this),t=n.data("width")==undefined?"150":n.data("width"),i=n.data("layout")==undefined?"button_count":n.data("layout"),r=n.data("url")==undefined?"https://www.facebook.com/thegioididongcom":n.data("url");n.html('<iframe src="//www.facebook.com/plugins/like.php?href='+r+"&amp;width&amp;layout="+i+'&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=35" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:'+t+'px; height:40px;" allowTransparency="true"><\/iframe>')})},5e3)}function SignInfomation(){flagSignInfomation||(flagSignInfomation=!0,$("#dlding").show(),$.ajax({type:"POST",cache:!1,url:"/Product/SignInfomation"+ConvertFromDataToQueryString("#frmSignInfomation"),contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(n){if(flagSignInfomation=!1,$("#dlding").fadeOut(),n.status==-1)alert(n.message);else{$(".bs-form").addClass("hide");var t=$("#SignGender").val()=="1"?"anh":"chị";$(".bs-result .bs-gender").html(t);$(".bs-result .bs-fullname").html(t+" "+$("#SignFullName").val());$(".bs-result .bs-phonenumber").html($("#SignPhoneNumber").val());$(".bs-result").removeClass("hide")}}}))}function SignInfomationCustomer(n,t){if(flagSignInfomationCustomer)return!1;flagSignInfomationCustomer=!0;$("#dlding").show();var i=ConvertFromDataToQueryString(n)+"&page="+t;return $.ajax({type:"POST",cache:!1,url:"/Product/SignInfomationCustomer"+i,success:function(n){if(flagSignInfomationCustomer=!1,$("#dlding").fadeOut(),n.status==-1)return alert(n.message),!1;$("body").addClass("over-flow");$("#popup-customer").html()==undefined?$("body").append(n):t>0?($("#popup-customer .pc-list").append($(n).find(".pc-list").find("p")),$("#pcViewMore").replaceWith($(n).find("#pcViewMore"))):$("#popup-customer").replaceWith(n)}}),!1}function CheckPromoteBHX(){flagCheckPromoteBHX||(flagCheckPromoteBHX=!0,$.ajax({type:"POST",cache:!1,url:"/Product/CheckPromoteBHX",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(n){var t,i,r;n!=null&&(n.status==1?$(".promoadd .promoadd__list li").length==0?$(".promoadd").remove():($(".promoadd").removeClass("hide"),$(".promoadd li.bhx").removeClass("hide")):(t=parseInt($(".bonus_count").html()),i=$(".promoadd li.bhx").html()==undefined?0:1,$(".bonus_count").html(t-i),$(".promoadd li.bhx").remove(),r=$(".promoadd").data("max")==undefined?2:parseInt($(".promoadd").data("max")),$(".promoadd .promoadd__list li").length==0?$(".promoadd").remove():$(".promoadd .promoadd__list li").length<=r&&($(".promoadd .promoadd-more").remove(),$(".promoadd .promoadd__list li").removeClass("hide"))))}}))}function showPopupPolicy(){$("#popup-baohanh").length>0&&($("#popup-baohanh").removeClass("hide"),$("#popup-baohanh").show())}function toggleBlock(n){$(n).toggleClass("down");$(n).hasClass("down")?$(n).next().slideDown():$(n).next().slideUp()}function openPopWrt(){$("#popup-olol").removeClass("hide");$("#popup-olol").show()}function openPopMucin(){$("#popup-mucin").removeClass("hide");$("#popup-mucin").show()}function closePopWrt(){$(".wrap_wrtp").addClass("hide");$(".wrap_wrtp").hide()}function selComboAcc(n){var i=$(n).attr("data-dc"),t=$(n).attr("data-am"),r="/cart/single?productId="+gl_productID+"&gtype=combopkien&quantity="+t;$(".area_comboAcc .prm i").removeClass("icondetail-radcheck").addClass("icondetail-radUncheck");$(n).find("i").removeClass("icondetail-radUncheck").addClass("icondetail-radcheck");$("#mua-comboAcc").attr("href",r);$("#mua-comboAcc b").html("MUA NGAY "+t+" SẢN PHẨM");$("#mua-comboAcc span").html("Giảm "+i)}function SuggestWCombo(n,t){var r=$(n).val().replace(/:|;|!|@@|#|\$|%|\^|&|\*|'|"|>|<|,|\.|\?|\/|`|~|\+|=|_|\(|\)|{|}|\[|\]|\\|\|/gi,""),i=r.trim().toLowerCase();t.which==13&&i.length===0?searchSuggestWCombo(""):t.which!=40&&t.which!=38&&searchSuggestWCombo(i)}function searchSuggestWCombo(n){return n==null?!1:n.length>1&&n.length<3?!1:($("#dlding").show(),$.ajax({type:"GET",cache:!1,url:"/Product/GetMoreCombo?productID="+$("#mua-combo").attr("data-watch")+"&cateID=7264&key="+n,success:function(n){if($(".wrapcp .wrapPop .gamecombo").remove(),$(".wrapcp .cbEmpty").remove(),n!=null&&n!="")$(".wrapcp .wrapPop .sggCb").after(n);else $(".wrapcp .wrapPop .sggCb").after("<span class='cbEmpty'>Không tìm thấy sản phẩm<\/span>");$("#dlding").hide()}}),!1)}function ChangeCombo(n){$("#catcb42 a img").attr("src",$("#pop"+n+" .lnkP img").attr("src"));$("#catcb42 .info h3").html($("#pop"+n+" h3").html());$("#catcb42 .info h3").attr("data-i",n);$("#catcb42 .info strong").html($("#pop"+n).attr("data-p"));console.log("ChangeCombo: "+$("#pop"+n).attr("data-h"));$("#catcb42 .info span.line").html("");$("#pop"+n).attr("data-lp")!=$("#pop"+n).attr("data-p")&&$("#catcb42 .info span.line").html($("#pop"+n).attr("data-lp"));$("#muakem .area_price .tt").html($("#pop"+n).attr("data-tt"));$("#muakem .area_price .line").html($("#pop"+n).attr("data-hp"));var t="/cart/single?productId="+n+"&gtype=muakem&comboid="+$("#mua-combo").attr("data-watch");$("#mua-combo").attr("href",t);$("#mua-combo span").html("Tiết kiệm "+$("#pop"+n).attr("data-cbtk"));closeComboWatchPopup()}function ChangeCombo_Cmr(n,t){$("#catcb"+t).attr("data-p",$("#pop"+n).attr("data-p"));$("#catcb"+t).attr("data-h",$("#pop"+n).attr("data-h"));$("#catcb"+t).attr("data-id",$("#pop"+n).attr("data-id"));$("#catcb"+t+" a img").attr("src",$("#pop"+n+" .lnkP img").attr("src"));$("#catcb"+t+" .info h3").html("<i><\/i>"+$("#pop"+n+" h3").html());$("#catcb"+t+" .info strong").html(formatNumberValue($("#pop"+n).attr("data-p"))+"đ");$("#catcb"+t+" .info .line").html(formatNumberValue($("#pop"+n).attr("data-h"))+"đ");$("#catcb"+t+" .checkBox").removeClass("selected");CheckItemCombo("catcb"+t);closeComboWatchPopup()}function CheckItemCombo(n){$("#"+n+" .selected").length>0?$("#"+n+" .checkBox").removeClass("selected"):$("#"+n+" .selected").length==0&&$("#"+n+" .checkBox").addClass("selected");var i="/cart/single?productId="+$("#muakem .cmr").attr("data-id")+"&gtype=muakem&comboid=",r=parseFloat($("#muakem .cmr").attr("data-p")),u=parseFloat($("#muakem .cmr").attr("data-h")),t=1;$("#muakem .cal").each(function(){$(this).find(".selected").length>0&&(t=t+1,r=r+parseFloat($(this).attr("data-p")),u=u+parseFloat($(this).attr("data-h")),i=i+$(this).attr("data-id")+",")});t>1?($("#mua-combo").removeClass("oneproduct"),$("#muakem .area_price .line").html(formatNumberValue(u)+"đ"),$("#mua-combo").attr("href",i)):t==1&&($("#mua-combo").addClass("oneproduct"),$("#muakem .area_price .line").html(""),$("#mua-combo").attr("href","javascript:;"));$("#mua-combo b").html("Mua "+t+" sản phẩm");$("#muakem .area_price .tt").html(formatNumberValue(r)+"đ")}function formatNumberValue(n){for(var i=n.toString().length,r=0,u="",f="",t;i%3!=0;)i++,r++;if(r!=0)for(t=0;t<r;t++)u+="0";for(u+=n.toString(),t=0;t<i;t++)f+=u.charAt(t),t>0&&(t+1)%3==0&&t!=i-1&&(f+=".");return f.substring(r)}function showComboWatchPopup(n){var t,i,r;$("html").addClass("overflow-hidden");$(".wrapcp").removeClass("hide");t=parseInt(n);t>0&&t!=42?($(".wrapcp .gamecombo .cates li").addClass("hide"),$(".wrapcp .gamecombo .scbc-"+n).removeClass("hide"),$(".wrapcp .wrapPop .titlebar b").html("Chọn mua "+$("#catcb"+n).attr("data-cn")+" khác"),$(".wrapcp .wrapPop .cates li .botbtn").html("CHỌN MUA"),$(".wrapcp .wrapPop .cates li .botbtn").removeClass("disable"),$(".gamecombo ul.list div.selected").length>0&&(i=[],$(".gameforcamera ul.list li.cal").each(function(){i.push($(this).attr("data-id"))}),console.log(i),$(".wrapcp .wrapPop .cates li").each(function(){i.includes($(this).attr("data-id"))&&($(this).find(".botbtn").html("ĐÃ CHỌN"),$(this).find(".botbtn").addClass("disable"))}))):t==42&&($(".wrapcp .wrapPop .cates li .botbtn").html("CHỌN MUA"),$(".wrapcp .wrapPop .cates li .botbtn").removeClass("disable"),r=$(".gamecombo #catcb42 .info h3").attr("data-i"),$(".wrapcp .wrapPop .cates li").each(function(){r==$(this).attr("data-id")&&($(this).find(".botbtn").html("ĐÃ CHỌN"),$(this).find(".botbtn").addClass("disable"))}))}function closeComboWatchPopup(){$(".wrapcp").addClass("hide");$("html").removeClass("overflow-hidden")}function openPopWrt(){$("#popup-olol").removeClass("hide");$("#popup-olol").show()}function closePopWrt(){$(".wrap_wrtp").addClass("hide");$(".wrap_wrtp").hide()}function removeParams(n){for(var t=window.location.href.split("?")[0]+"?",f=decodeURIComponent(window.location.search.substring(1)),u=f.split("&"),i,r=0;r<u.length;r++)i=u[r].split("="),i[0]!=n&&(t=t+i[0]+"="+i[1]+"&");return t.substring(0,t.length-1)}function getListDistrictByProvId(n){return $.ajax({type:"GET",cache:!1,url:"/Product/ListDistrict?provinceId="+n,success:function(t){if($("#dlding").fadeOut(),t.code==-1)return alert(t.msg),!1;$(".address-deli .lstdistrict .scroll").html(t.data);$(".address-deli .district").html("<p> Quận / Huyện<\/p>");$(".address-deli .ward").html("<p> Phường/ Xã <\/p>");$(".submitdeli").addClass("gray");$(".submitdeli").text("Mời bạn chọn đầy đủ địa chỉ");$(".address-deli .district").click();$(".address-deli .lstward .scroll").empty();n!=3?$(".address-deli.fromxtoy .warning-text").hide():$(".address-deli.fromxtoy .warning-text").show()}}),!1}function getListWardByDistrict(n,t){return $.ajax({type:"GET",cache:!1,url:"/Product/ListWard?districtId="+t,success:function(n){if($("#dlding").fadeOut(),n.code==-1)return alert(n.msg),!1;$(".address-deli .lstward .scroll").html(n.data);$(".ward").html("<p> Phường/ Xã <\/p>");$(".address-deli .ward").click()}}),!1}function submitCheckDeliveryTime(){$("#dlding").show();var t=window.location.href,n=window.location.hash;return $.ajax({type:"GET",cache:!1,url:"/Product/GetDeliveryTime?productId="+dataDeli.ProductId+"&provinceId="+dataDeli.ProvinceId+"&districtId="+dataDeli.DistrictId+"&wardId="+dataDeli.WardId+"&url="+t,success:function(t){if($("#dlding").fadeOut(),t.Code==-1)return alert(t.Msg),!1;window.history.pushState("","",t.data+(n=="#2-gia"?n:""));window.location.reload()}}),!1}function CheckTimeCanDelivery(n){$("#status-delivery").length!=0&&$.ajax({type:"GET",cache:!1,url:"/Product/DeliveryDateTime?productId="+dataDeli.ProductId+"&productCode="+dataDeli.ProductCode+"&isTowPrice="+n,success:function(t){t.code==-1?alert(t.msg):(n?$("#status-delivery-2price").html(t.data.html):$("#status-delivery").html(t.data.html),InitDelivery(n))}})}function InitDelivery(n){$boxDelivery=n?$("#status-delivery-2price"):$("#status-delivery");$boxDelivery.find(".place").click(function(){$(this).next().find("aside").length>0&&($(".place").not(this).next().hide(),console.log("click .place"+$(this).parent().attr("class")),$(this).next().slideToggle(100))});$(".lstprovince  aside a").click(function(){$(".lstprovince  aside a").removeClass("active");$(this).addClass("active");$(".lstprovince ").prev().find("p").text($(this).text());$(".lstprovince ").hide();dataDeli.ProvinceId=$(this).data("value");dataDeli.ProvinceName=$(this).text();dataDeli.DistrictId=0;isChangeProv=!0;getListDistrictByProvId(dataDeli.ProvinceId)});$("#txtProvince,#txtDistrict,#txtWard,#txtDis,#txtPro").on("keydown",function(n){n.which=="13"&&event.preventDefault()});$(document).on("click",".lstdistrict aside a",function(){$(".lstdistrict aside a").removeClass("active");$(this).addClass("active");$(".district").find("p").length?$(".district").find("p").text($(this).text()):$(".district").html("<p>"+$(this).text()+"<\/p>");dataDeli.DistrictId=$(this).data("value");dataDeli.DistrictName=$(this).text();dataDeli.WardId=0;dataDeli.WardName="";$(".lstdistrict").hide();$("#mustcheck").hide();$(".district.place.border").removeClass("border");$(".quickdelivery.fromxtoy.border").removeClass("border");getListWardByDistrict(dataDeli.ProvinceId,dataDeli.DistrictId);$(".submitdeli").addClass("gray");$(".submitdeli").text("Mời bạn chọn đầy đủ địa chỉ")});$boxDelivery.find(".lstprovince input[type=text]").keyup(function(){var t=$(this),n=this.value;t.parents(".lstprovince").find(".scroll a").each(function(){var t=$(this).text(),i=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,r=new RegExp(n.replace(i,"\\$&"),"gi"),u=new RegExp(slugify(n).replace(i,"\\$&"),"gi");t.search(r)!==-1||slugify(t).search(r)!==-1||slugify(t).search(u)!==-1?$(this).show():$(this).hide()})});$boxDelivery.find(".lstdistrict input[type=text]").keyup(function(){var t=$(this),n=this.value;t.parents(".lstdistrict").find(".scroll a").each(function(){var t=$(this).text(),i=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,r=new RegExp(n.replace(i,"\\$&"),"gi"),u=new RegExp(slugify(n).replace(i,"\\$&"),"gi");t.search(r)!==-1||slugify(t).search(r)!==-1||slugify(t).search(u)!==-1?$(this).show():$(this).hide()})});$(document).on("click",".lstward aside a",function(){$(".lstward aside a").removeClass("active");$(this).addClass("active");$(".ward").find("p").length?$(".ward").find("p").text($(this).text()):$(".ward").html("<p>"+$(this).text()+"<\/p>");$(".ward.place.border").removeClass("border");$(".quickdelivery.fromxtoy.border").removeClass("border");dataDeli.WardId=$(this).data("value");dataDeli.WardName=$(this).text();$("#mustcheck").hide();isFromXtoY=$(".lstward").data("xtoy");dataDeli.WardName=$(this).text();$(".submitdeli.gray").length&&($(".submitdeli.gray").removeClass("gray"),$(".submitdeli").text("Xác nhận"));isFromXtoY==="isXtoY"&&submitCheckDeliveryTime();$(".lstward").hide()});$boxDelivery.find(".lstward input[type=text]").keyup(function(){var t=$(this),n=this.value;t.parents(".lstward").find(".scroll a").each(function(){var t=$(this).text(),i=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,r=new RegExp(n.replace(i,"\\$&"),"gi"),u=new RegExp(slugify(n).replace(i,"\\$&"),"gi");t.search(r)!==-1||slugify(t).search(r)!==-1||slugify(t).search(u)!==-1?$(this).show():$(this).hide()})})}function Countdown(){$(".clock").each(function(){var n=$(this).data("time"),i=$(this).data("showminute"),r=$(this).data("showhour"),u=$(this).data("reload"),t="#"+$(this).attr("id");if($(t).countdown(n,function(n){i==1?$(this).html(n.strftime("%M phút : %S giây")):r==1?$(this).html(n.strftime("%H giờ : %M phút")):$(this).html(n.strftime("%D ngày : %H giờ"))}),u==1)$(t).countdown(n).on("finish.countdown",function(){window.location.reload()})})}function loadingRedirect(){$("#progressTop").remove();$(".overlay").show();$("body").append($("<div><b><\/b><i><\/i><\/div>").attr("id","progressTop"));$("#progressTop").width("105%")}function CheckDelivery(n="#status-delivery"){$(n).find(".quickdelivery.fromxtoy").addClass("dl-border");dataDeli.DistrictId>0?(alert("Vui lòng chọn phường xã"),$(n).find(".ward.place").addClass("dl-border"),$(n).find(".mustcheck").text("*Vui lòng chọn phường xã").show()):(alert("Vui lòng chọn quận huyện"),$(n).find(".district.place").addClass("dl-border"),$(n).find(".mustcheck").text("*Vui lòng chọn quận huyện").show());$(n).length>0&&$("html,body").animate({scrollTop:$(n).offset().top-10},500)}function PromotionImage(n,t){$("html, body").addClass("overflow-hidden");$(".promotionimage."+n).removeClass("hide");var i=$(".promotionimage."+n+" .owl-promotionimage").owlCarousel({items:1,loop:!1,dots:!1,nav:!0,autoplay:!1,autoplayHoverPause:!1,lazyLoad:!0,navText:["",""],lazyLoadEager:3,autoHeight:!0});i.trigger("to.owl.carousel",t,200)}function StickyButton(){isMobile&&$(window).scroll(function(){if($(".sticky-bar").length!=0){var i=$(this).scrollTop(),n=0,t=0;$(".block-button.normal").length>0?(n=$(".block-button.normal").offset().top,t=$(".block-button.normal").height()):$(".block-button").length>0&&(n=$(".block-button").offset().top,t=$(".block-button").height());n>100&&(i>n+t?$(".sticky-bar").removeClass("hide"):$(".sticky-bar").addClass("hide"))}})}function initLoadData(){if(OnLoadPromotionML(),$(".block-button .btn-ins").length>0)$(".block-button .btn-ins, .sticky-bar .sticky-bar-tragop").on("click",function(){if(!dataDeli.IsCheckSubmit)return $(this).attr("href","javascript:"),$(this).hasClass("twoprice")?CheckDelivery("#status-delivery-2price"):CheckDelivery(),!1});if($(".block-button .btn-buynow").length>0)$(".block-button .btn-buynow, .sticky-bar .sticky-bar-buy").on("click",function(){if(!$(this).parent().hasClass("cleanstock"))return dataDeli.IsCheckSubmit?void 0:($(this).attr("href","javascript:"),$(this).hasClass("twoprice")?CheckDelivery("#status-delivery-2price"):CheckDelivery(),!1)})}function initModals(){$(document.body).on("click","a[data-modal]",function(n){(n.preventDefault(),n.target===undefined||n.target.tagName!=="IMG"||n.target.parentElement===undefined||n.target.parentElement.className!=="utility")&&(target==="#vat-tu-lap-dat"&&MaterialsFee(0),history.pushState({productID:document.productId},"New URL: "+document.URL,document.URL))});location.hash!==undefined&&location.hash!==""&&location.hash!=="#main-container"&&$("a[href='"+location.hash+"'][data-modal]").click()}function MaterialsFee(n){$("#popup-materialsfee .items-setup").length>0?($("#popup-materialsfee").removeClass("hide"),$("#popup-materialsfee").show()):$.ajax({type:"GET",cache:!1,url:"/Product/MaterialsFee?productId="+document.productId+"&iFactor="+n,success:function(n){n.code==-1?alert(n.msg):($("#popup-materialsfee .pop").html(n.data),$("#popup-materialsfee").removeClass("hide"),$("#popup-materialsfee").show(),checkCBHardcode())}})}function checkCBHardcode(){$(".row.cb").length>0&&$(".row.cb").each(function(){var n=$(this),t=n.find("input").attr("value");t=="false"&&n.find("input").removeAttr("checked")})}function InitProductOwlCarousel(n){n.owlCarousel({nav:!0,items:5,slideBy:5,dots:!1,rewind:!0,rewindNav:!0})}function OnLoadPromotionML(){if($(".kmml21 .kmbox.active").length>0){var n=$(".kmml21 .kmbox.active").attr("data-url");$(".block-button a.btn-buynow, a.sticky-bar-buy").attr("onclick","");$(".block-button a.btn-buynow, a.sticky-bar-buy").attr("href",n)}}function OnLoadBannerDetail(){if($(".banner-detail").length>0){var n=$(".banner-detail a").attr("href");n=="#"&&$(".banner-detail a").attr("href","javascript:")}}function OnLoadPolicy(){if($(".policy ul.policy__list").length>0){var n=$(".policy ul.policy__list").html();n==""&&$(".policy").remove()}}function BuildProductByShortCode(n){var t=$(n).data("title"),i=$(n).data("categoryid").toString().replace(/<\/?[^>]+(>|$)/g,""),r=$(n).data("propertyid").toString().replace(/<\/?[^>]+(>|$)/g,""),u=$(n).data("listid").toString().replace(/<\/?[^>]+(>|$)/g,""),f=$(n).data("manufactureid").toString().replace(/<\/?[^>]+(>|$)/g,""),e=$(n).data("pagesize").toString().replace(/<\/?[^>]+(>|$)/g,"");$.ajax({url:"/Product/BuildProductByShortCode",async:!1,type:"GET",data:{productIds:u,categoryId:i,manufactureId:f,propertyId:r,pageSize:e},cache:!1,beforeSend:function(){},success:function(i){i!==null&&i.trim()!==""&&($(n).html(i).hide(),$(n).find(".boxShortCode_item").length>4?($(n).find(".boxShortCode_item").each(function(n){n>3&&$(this).addClass("hide").hide()}),$(n).show(),$(n).find(".boxShortCode_viewmore").show()):$(n).show(),t!=null&&t.trim()!=""&&$(n).find(".boxShortCode_title").html(t))},error:function(){}})}function PopupOldPolicy(){$("#popup-oldpolicy").removeClass("hide");var n=0;$("#popup-oldpolicy div > *").each(function(){n+=$(this).height()+10});$("#popup-oldpolicy div").height(n+20)}function SentCoupon(){if(!issentcoupon){issentcoupon=!0;var n=$(".product__coupon form");/((09|03|07|08|05)+([0-9]{8})\b)/g.test($("#PhoneNumber").val().replace(" ","").trim())||n.find(".error").css("display","block").html("Số điện thoại của bạn không đúng định dạng!");$.ajax({url:urlRoot+"/Product/SentCoupon",type:"POST",data:n.serializeArray(),cache:!1,beforeSend:function(){$("#dldingtext").show()},success:function(t){if($("#dldingtext").hide(),issentcoupon=!1,t.status==-1){n.find(".error").css("display","block").html(t.message);return}t.status==1&&($(".product__coupon form > *").hide(),$("#PhoneNumber").val(""),n.find("div").replaceWith(t.message),n.find("div").show());n.find(".error").hide()},error:function(){$("#dldingtext").hide()}})}}function OpenPopupCoupon(){var n,t;$(".product__coupon").length<=0||($(".product__coupon").show(),$(".locationbox__overlay").show(),$("html,body").addClass("over-flow"),n=$(".product__coupon form"),$(".product__coupon form > *").show(),n.find("div").hide(),t=/((09|03|07|08|05)+([0-9]{8})\b)/g,$("#PhoneNumber").keyup(function(){var i=t.test(this.value.trim().replace(" ",""));console.log(t.test(this.value.trim().replace(" ","")));this.value.trim()==""?(n.find(".error").css("display","block").html("Vui lòng nhập số điện thoại!"),n.find("button").addClass("disabled"),$("#PhoneNumber").css("border-color","#d0021c")):i?(n.find(".error").hide(),n.find("button").removeClass("disabled"),$("#PhoneNumber").css("border-color","#ddd")):(n.find(".error").css("display","block").html("Số điện thoại của bạn không đúng định dạng!"),n.find("button").addClass("disabled"),$("#PhoneNumber").css("border-color","#d0021c"))}))}function TogglePopupCoupon(){$(".product__coupon").length<=0||($(".product__coupon").hide(),$(".locationbox__overlay").hide(),$("html,body").removeClass("over-flow"))}function ReloadFlashSale(){flagReloadFlashSale||(flagReloadFlashSale=!0,$.ajax({type:"POST",cache:!1,url:"/Product/ReloadFlashSale?productId="+document.productId,success:function(n){n.status==1?(flagReloadFlashSale=!1,n.html!=""&&$(".box_saving .bs_title div span").html(n.html),$(".block-button saving").hasClass("hide")==!1&&(n.isShowButton?$(".box_saving .block-button").show():$(".box_saving .block-button").hide()),n.isReload==!1&&clearInterval(intervalFS)):n.status==-2?($(".box_saving").next().remove(),$(".box_saving").remove(),clearInterval(intervalFS)):clearInterval(intervalFS)}}))}function CheckingFlashsaleProduct(){let n=document.productId;$.ajax({url:"/Product/CheckFlashsaleCommand",data:{productId:n},cache:!1,async:!0,beforeSend:function(){},success:function(n){var i,t,r,u;if(n!==undefined&&n!=="")if(n.status<=0)alert(n.message);else{$(".overlay").addClass("checking").show();$(".checkingfs-container.manu-info-popup").show();console.log(JSON.parse(n.message));let f=[];for(i of JSON.parse(n.message))t="<p class='{0}'><span>- {1}<\/span><label>{2}<\/label><\/p>",t=t.replace("{0}",i.IsSucess?"success":"error"),t=t.replace("{1}",i.Label),t=t.replace("{2}",i.ErrorString),f.push(t);f.push("<p class='go-back'><a href='/?clearcache=all'>Clear Cache -> <\/a><\/p>");r=0;u=setInterval(function(){if(f.length==r){clearInterval(u);return}$("#checking-detail").append(f[r]);r++},1e3);$(".checkingfs-container .manu-info-popup__content__btn-close").click(function(){closeCheckingFS()})}},error:function(n){console.log(n)}})}function closeCheckingFS(){$(".overlay").removeClass("checking").hide();$(".checkingfs-container.manu-info-popup").hide();$("#checking-detail").html("")}function showPopup(){$(".locationbox__overlay").show();$("html,body").addClass("over-flow")}function hidePopup(){$(".locationbox__overlay").hide();$("html,body").removeClass("over-flow")}function LoadViewStoreBusiness(){if(IsLoadStoreBusiness){var n=$("a.openWarrantyNew").attr("data-productcode"),t={productCode:n};$.ajax({url:"/Ajax/GetViewStoreBusiness",method:"POST",data:t,success:function(n){n.code===0?($(".box-available").html(n.data),IsLoadStoreBusiness=!1,$(".box-available").show()):console.log(n.errormessage)},error:function(){console.log("Lỗi")},complete:function(){}})}$(".box-available").show()}function LoadDistrictStoreBusinessByProvince(n){var t=$("a.openWarrantyNew").attr("data-productcode"),i={productCode:t,provinceId:n};$.ajax({url:"/Ajax/GetDistrictBusinessByProvince",method:"POST",data:i,success:function(n){n.code===0?$(".boxprov .listdist .scroll").html(n.data):console.log(n.errormessage)},error:function(){console.log("Lỗi")},complete:function(){}})}function LoadStoreBusinessByProvince(){var n=$(".boxprov .dist span").data("districtid"),t=$(".boxprov .city span").data("id"),i=$("a.openWarrantyNew").attr("data-productcode"),r={productCode:i,provinceId:t,districtId:n};$.ajax({url:"/Ajax/GetStoreBusinessByProvince",method:"POST",data:r,beforeSend:function(){$(".boxcontainer-store .overlayloading").show()},success:function(n){n.code===0?$(".boxcontainer-store").html(n.data):console.log(n.errormessage)},error:function(){console.log("Lỗi")},complete:function(){$(".boxcontainer-store .overlayloading").hide()}})}function GetLocal(n){function t(t){n(t)}function i(t){n(null);console.warn(`ERROR(${t.code}): ${t.message}`)}navigator.geolocation.getCurrentPosition(t,i,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}function LoadViewMarketStock(n){var t,f;if($("#dlding").show(),IsLoadViewMarketStock){IsLoadViewMarketStock=!1;var i=$(".jsSpmarket").attr("data-proCode"),e=$(".jsSpmarket").data("setup"),o=$(".jsSpmarket").data("onlystore"),s=$(".jsSpmarket").data("proid"),h=$(".jsSpmarket").data("cateid"),r=0,u=0;n!=undefined&&n!==null&&(t=n.coords,r=t.latitude,u=t.longitude,i=$(".spmarket .spmarket__code .color-item.act").data("code"));f={productCode:i,isSetup:e,productId:s,cateId:h,latitude:r,longitude:u,isOnlyAtStore:o};$.ajax({url:"/Ajax/GetViewMarketStock",method:"POST",data:f,success:function(n){n.code===0?(IsLoadViewMarketStock=!0,$("#dlding").hide(),$(".spmarket").html(n.data).addClass("dpblock").show(),showPopup(),setHeightPopup()):console.log(n.errormessage)},error:function(){console.log("Lỗi")},complete:function(){}})}}function setHeightPopup(){if(document.isDesktop!=0){var n=100;$(".spmarket > *").each(function(){n+=$(this).outerHeight()});$(".spmarket").css("height",n+"px")}}function GetDistrictStockStoreByProvince(n){var t={provinceId:n};$.ajax({url:"/Ajax/GetDistrictStockStoreByProvince",method:"POST",data:t,success:function(t){t.code===0?($(".spmarket__address .spmarket__district").html(t.data),n!=3&&$(".spmarket .warning-text").hide()):console.log(t.errormessage)},error:function(){console.log("Lỗi")},complete:function(){}})}function LoadStoreStockByProvince(n){$(".spmarket__main .overlayloading").show();var t=$(".spmarket__address .dist").data("districtid"),i=$(".spmarket__address .city").data("id"),r=n==undefined||n==""?$(".spmarket__code .color-item.current.act").data("code"):n,u=$(".jsSpmarket").data("setup"),f=$(".jsSpmarket").data("onlystore"),e=$(".spmarket__address .city span").html(),o=$(".spmarket__address .dist span").html(),s=$(".jsSpmarket").data("proid"),h=$(".jsSpmarket").data("cateid"),c={productCode:r,provinceId:i,districtId:t,isSetup:u,provinceName:e,districtName:o,latitude:0,longitude:0,isOnlyAtStore:f,productId:s,cateId:h};$.ajax({url:"/Ajax/LoadStoreStockByProvince",method:"POST",data:c,beforeSend:function(){},success:function(n){n.code===0?($(".spmarket__main").html(n.data),setHeightPopup(),$(".jsnearstore").removeClass("hide")):console.log(n.errormessage)},error:function(){console.log("Lỗi")},complete:function(){$(".spmarket__main .overlayloading").hide()}})}var domainTracking="DesktopVersion.",flagOpenPopup,gl_isGetScript,gl_rtCurStar,gl_sendRating,flagGetProductScrollAcc,flagGetProductScrollSameProduct,intervalFS,flagSignInfomation,flagSignInfomationCustomer,flagCheckPromoteBHX,createCookie,issentcoupon,flagReloadFlashSale,IsLoadStoreBusiness,IsLoadViewMarketStock;
/*! jQuery Validation Plugin - v1.19.3 - 1/9/2021
 * https://jqueryvalidation.org/
 * Copyright (c) 2021 Jörn Zaefferer; Licensed MIT */
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){var i,r,t;return n.extend(n.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget;n(this).hasClass("cancel")&&(i.cancelSubmit=!0);void 0!==n(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function r(){var r,u;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(u=i.settings.submitHandler.call(i,i.currentForm,t),r&&r.remove(),void 0!==u&&u)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i,r;return n(this[0]).is("form")?t=this.validate().form():(r=[],t=!0,i=n(this[0].form).validate(),this.each(function(){t=i.element(this)&&t;t||(r=r.concat(i.errorList))}),i.errorList=r),t},rules:function(t,i){var e,s,f,u,o,h,r=this[0],c="undefined"!=typeof this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=r&&(!r.form&&c&&(r.form=this.closest("form")[0],r.name=this.attr("name")),null!=r.form)){if(t)switch(e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r),t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(h={},n.each(i.split(/\s/),function(n,t){h[t]=f[t];delete f[t]}),h):(delete s[r.name],f)}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(o=u.required,delete u.required,u=n.extend({required:o},u)),u.remote&&(o=u.remote,delete u.remote,u=n.extend(u,{remote:o})),u}}}),i=function(n){return n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},n.extend(n.expr.pseudos||n.expr[":"],{blank:function(t){return!i(""+n(t).val())},filled:function(t){var r=n(t).val();return null!==r&&!!i(""+r)},unchecked:function(t){return!n(t).prop("checked")}}),n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()},n.validator.format=function(t,i){return 1===arguments.length?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:void 0===i?t:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)},n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(n)))},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||n.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])!==-1||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}."),step:n.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var e="undefined"!=typeof n(this).attr("contenteditable")&&"false"!==n(this).attr("contenteditable");if(!this.form&&e&&(this.form=n(this).closest("form")[0],this.name=n(this).attr("name")),r===this.form){var u=n.data(this.form,"validator"),f="on"+t.type.replace(/^validate/,""),i=u.settings;i[f]&&!n(this).is(i.ignore)&&i[f].call(u,this,t)}}this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var t,r=this.currentForm,u=this.groups={};n.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/));n.each(i,function(n,i){u[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",i).on("click.validate","select, option, [type='radio'], [type='checkbox']",i);this.settings.invalidHandler&&n(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){var e,o,i=this.clean(t),r=this.validationTargetFor(i),u=this,f=!0;return void 0===r?delete this.invalid[i.name]:(this.prepareElement(r),this.currentElements=n(r),o=this.groups[r.name],o&&n.each(this.groups,function(n,t){t===o&&n!==r.name&&(i=u.validationTargetFor(u.clean(u.findByName(n))),i&&i.name in u.invalid&&(u.currentElements.push(i),f=u.check(i)&&f))}),e=this.check(r)!==!1,f=f&&e,this.invalid[r.name]=e?!1:!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n(t).attr("aria-invalid",!e)),f},showErrors:function(t){if(t){var i=this;n.extend(this.errorMap,t);this.errorList=n.map(this.errorMap,function(n,t){return{message:n,element:i.findByName(t)[0]}});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(n){var t;if(this.settings.unhighlight)for(t=0;n[t];t++)this.settings.unhighlight.call(this,n[t],this.settings.errorClass,""),this.findByName(n[t].name).removeClass(this.settings.validClass);else n.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t,i=0;for(t in n)void 0!==n[t]&&null!==n[t]&&n[t]!==!1&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(n){n.not(this.containers).text("");this.addWrapper(n).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===n.grep(this.errorList,function(n){return n.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var r=this.name||n(this).attr("name"),u="undefined"!=typeof n(this).attr("contenteditable")&&"false"!==n(this).attr("contenteditable");return!r&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),u&&(this.form=n(this).closest("form")[0],this.name=r),this.form===t.currentForm&&!(r in i||!t.objectLength(n(this).rules()))&&(i[r]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return n(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([])},reset:function(){this.resetInternals();this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var i,r,u=n(t),f=t.type,e="undefined"!=typeof u.attr("contenteditable")&&"false"!==u.attr("contenteditable");return"radio"===f||"checkbox"===f?this.findByName(t.name).filter(":checked").val():"number"===f&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":u.val():(i=e?u.text():u.val(),"file"===f?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(r=i.lastIndexOf("/"),r>=0?i.substr(r+1):(r=i.lastIndexOf("\\"),r>=0?i.substr(r+1):i)):"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var u,f,r,e,i=n(t).rules(),c=n.map(i,function(n,t){return t}).length,s=!1,h=this.elementValue(t);"function"==typeof i.normalizer?e=i.normalizer:"function"==typeof this.settings.normalizer&&(e=this.settings.normalizer);e&&(h=e.call(t,h),delete i.normalizer);for(f in i){r={method:f,parameters:i[f]};try{if(u=n.validator.methods[f].call(this,h,t,r.parameters),"dependency-mismatch"===u&&1===c){s=!0;continue}if(s=!1,"pending"===u)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!u)return this.formatAndAdd(t,r),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+r.method+"' method.",o),o instanceof TypeError&&(o.message+=".  Exception occurred when checking element "+t.id+", check the '"+r.method+"' method."),o;}}if(!s)return this.objectLength(i)&&this.successList.push(t),!0},customDataMessage:function(t,i){return n(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||n(t).data("msg")},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;n<arguments.length;n++)if(void 0!==arguments[n])return arguments[n]},defaultMessage:function(t,i){"string"==typeof i&&(i={method:i});var r=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||void 0,n.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"<\/strong>"),u=/\$?\{(\d+)\}/g;return"function"==typeof r?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters)),r},formatAndAdd:function(n,t){var i=this.defaultMessage(n,t);this.errorList.push({message:i,element:n,method:t.method});this.errorMap[n.name]=i;this.submitted[n.name]=i},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var u,s,e,o,r=this.errorsFor(t),h=this.idOrName(t),f=n(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("id",h+"-error").addClass(this.settings.errorClass).html(i||""),u=r,this.settings.wrapper&&(u=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(u):this.settings.errorPlacement?this.settings.errorPlacement.call(this,u,n(t)):u.insertAfter(t),r.is("label")?r.attr("for",h):0===r.parents("label[for='"+this.escapeCssMeta(h)+"']").length&&(e=r.attr("id"),f?f.match(new RegExp("\\b"+this.escapeCssMeta(e)+"\\b"))||(f+=" "+e):f=e,n(t).attr("aria-describedby",f),s=this.groups[t.name],s&&(o=this,n.each(o.groups,function(t,i){i===s&&n("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",r.attr("id"))}))));!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var r=this.escapeCssMeta(this.idOrName(t)),u=n(t).attr("aria-describedby"),i="label[for='"+r+"'], label[for='"+r+"'] *";return u&&(i=i+", #"+this.escapeCssMeta(u).replace(/\s+/g,", #")),this.errors().filter(i)},escapeCssMeta:function(n){return n.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),n(t).not(this.settings.ignore)[0]},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return!this.dependTypes[typeof n]||this.dependTypes[typeof n](n,t)},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,n(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;this.pendingRequest<0&&(this.pendingRequest=0);delete this.pending[t.name];n(t).removeClass(this.settings.pendingClass);i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.submitButton&&n("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return i="string"==typeof i&&i||"remote",n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm();n(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(n,t,i,r){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(r=Number(r),isNaN(r)&&(r=void 0));r||0===r?n[i]=r:t===i&&"range"!==t&&(n[i]=!0)},attributeRules:function(t){var r,i,u={},f=n(t),e=t.getAttribute("type");for(r in n.validator.methods)"required"===r?(i=t.getAttribute(r),""===i&&(i=!0),i=!!i):i=f.attr(r),this.normalizeAttributeRule(u,e,r,i);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t),e=t.getAttribute("type");for(i in n.validator.methods)r=f.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),""===r&&(r=!0),this.normalizeAttributeRule(u,e,i,r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)return void delete t[r];if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=void 0===u.param||u.param:(n.data(i.form,"validator").resetElements(n(i)),delete t[r])}}),n.each(t,function(n,r){t[n]="function"==typeof r&&"normalizer"!==n?r(i):r}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var n;t[this]&&(Array.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),n.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=void 0!==r?r:n.validator.messages[t];i.length<3&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:void 0!==t&&null!==t&&t.length>0},email:function(n,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)},url:function(n,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(n)},date:function(){var n=!1;return function(t,i){return n||(n=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(i)||!/Invalid|NaN/.test(new Date(t).toString())}}(),dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(n)},number:function(n,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},minlength:function(n,t,i){var r=Array.isArray(n)?n.length:this.getLength(n,t);return this.optional(t)||r>=i},maxlength:function(n,t,i){var r=Array.isArray(n)?n.length:this.getLength(n,t);return this.optional(t)||r<=i},rangelength:function(n,t,i){var r=Array.isArray(n)?n.length:this.getLength(n,t);return this.optional(t)||r>=i[0]&&r<=i[1]},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||n<=i},range:function(n,t,i){return this.optional(t)||n>=i[0]&&n<=i[1]},step:function(t,i,r){var u,f=n(i).attr("type"),h="Step attribute on input type "+f+" is not supported.",c=new RegExp("\\b"+f+"\\b"),l=f&&!c.test("text,number,range"),e=function(n){var t=(""+n).match(/(?:\.(\d+))?$/);return t&&t[1]?t[1].length:0},o=function(n){return Math.round(n*Math.pow(10,u))},s=!0;if(l)throw new Error(h);return u=e(r),(e(t)>u||o(t)%o(r)!=0)&&(s=!1),this.optional(i)||s},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.not(".validate-equalTo-blur").length&&u.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r,u){if(this.optional(i))return"dependency-mismatch";u="string"==typeof u&&u||"remote";var f,o,s,e=this.previousValue(i,u);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),e.originalMessage=e.originalMessage||this.settings.messages[i.name][u],this.settings.messages[i.name][u]=e.message,r="string"==typeof r&&{url:r}||r,s=n.param(n.extend({data:t},r.data)),e.old===s?e.valid:(e.old=s,f=this,this.startRequest(i),o={},o[i.name]=t,n.ajax(n.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:o,context:f.currentForm,success:function(n){var r,s,h,o=n===!0||"true"===n;f.settings.messages[i.name][u]=e.originalMessage;o?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(i),f.formSubmitted=h,f.successList.push(i),f.invalid[i.name]=!1,f.showErrors()):(r={},s=n||f.defaultMessage(i,{method:u,parameters:t}),r[i.name]=e.message=s,f.invalid[i.name]=!0,f.showErrors(r));e.valid=o;f.stopRequest(i,o)}},r)),"pending")}}}),t={},n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;"abort"===n.mode&&(t[u]&&t[u].abort(),t[u]=r)}):(r=n.ajax,n.ajax=function(i){var f=("mode"in i?i:n.ajaxSettings).mode,u=("port"in i?i:n.ajaxSettings).port;return"abort"===f?(t[u]&&t[u].abort(),t[u]=r.apply(this,arguments),t[u]):r.apply(this,arguments)}),n});var idcompare=[],urlcompare=[],isInitSuggest=!1,isFirstSS=!0;$(document).ready(function(){$(document).on("click","#kcc",function(){isInitSuggest||initSuggest()});$(document).on("click",".close-comppare",function(){clearCompare()});if(document.isDesktop==!0)$(document).on("click",".overlay.v2",function(){clearCompare()});$(document).on("click",".input-text i.iconcate-closess",function(){$("#kcc").val("");$(".autocomplete").hide();$(".input-text i.iconcate-closess").hide()});$(document).on("click",".listcompare .cp-plus.cp-plus_new",function(){})});let getHeight=0;globalEvent.on("autocomplete",initSuggest);flagOpenPopup=!1;$(document).ready(function(){initManuInfoPopup()});const youtubePlayer=function(){function t(){function r(){isJsType(n.data.playerContainerId,jsType.string)!==!1&&isJsType(n.data.videoId,jsType.string)!==!1&&YT&&isJsType(YT.Player,jsType.function)!==!1&&(t?isJsType(t.loadVideoById,jsType.function)===!0&&(t.loadVideoById(n.data.videoId,n.data.currentTime),n.methods.onReady()):t=new YT.Player(n.data.playerContainerId,{width:n.data.width,height:n.data.height,videoId:n.data.videoId,playerVars:{start:n.data.currentTime,rel:0,autoplay:1},events:{onReady:u,onStateChange:f}}))}function u(t){if(!t){console.log("return onPlayerReady_");return}t.target.playVideo();n.methods.onReady()}function f(t){switch(t.data){case i.paused:n.methods.onPause();break;case i.ended:n.methods.onStop();break;case i.playing:n.methods.onPlay()}}function e({playerContainerId:f,videoId:o,startTime:e,onStop:u,onPause:t,onPlay:i,onReady:r}){showLoadingEffect();f&&(n.data.playerContainerId=f,n.data.playerContainerElName=`#${f}`);o&&(n.data.videoId=o);e&&(n.data.currentTime=e);isJsType(u,jsType.function)===!0&&(n.methods.onStop=u);isJsType(t,jsType.function)===!0&&(n.methods.onPause=t);isJsType(i,jsType.function)===!0&&(n.methods.onPlay=i);isJsType(r,jsType.function)===!0&&(n.methods.onReady=function(){r();hideLoadingEffect()})}const n=this;this.data={currentTime:0,playerContainerId:"",width:"100%",height:"100%",videoId:"",duration:0,playerContainerElName:"",videoUrl:""};this.methods={onStop:function(){},onPause:function(){},onPlay:function(){},onReady:function(){}};const i={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,videoCued:4};let t;this.stopVideo=function(){t&&isJsType(t.stopVideo,jsType.function)!==!1&&t.stopVideo()};this.mounted=function({playerContainerId:f,videoId:s,startTime:o,onStop:u,onPause:n,onPlay:t,onReady:i}){e({playerContainerId:f,videoId:s,startTime:o,onStop:u,onPause:n,onPlay:t,onReady:i});r()}}let n;return{getInstance:function(){return n||(n=new t,n.constructor=null),n}}}();let threesixtyTimeout;$(document).ready(function(){listGalleries.mounted();$(document).on("keyup",function(n){n.key=="Escape"||n.keyCode==27?$(".btn-closemenu").trigger("click"):n.key=="ArrowRight"||n.keyCode==39?$(".block-tab .content-t__list .sync1 .owl-next").trigger("click"):(n.key=="ArrowLeft"||n.keyCode==37)&&$(".block-tab .content-t__list .sync1 .owl-prev").trigger("click")});$(document).on("mousewheel",".block-tab .content-t__list .sync1",function(n){n.originalEvent.deltaY>0?$(".block-tab .content-t__list .sync1 .owl-next").trigger("click"):$(".block-tab .content-t__list .sync1 .owl-prev").trigger("click")});$(document).on("click",".block-tab .bt-overlay",function(){$(".btn-closemenu").trigger("click")});$(document).on("click",".block-tab .content-t__list .sync1 a span.note",function(){window.open($(this).data("url"),"_blank")})});const bodyEl=$("body"),htmlEl=$("html"),galleryTypeId={featuredImagesGallery:"featured-images-gallery",videosGallery:"videos-gallery",unboxGallery:"unbox-gallery",threeSixtyGallery:"360-degree-gallery",fullSpecificationGallery:"specification-gallery",articleGallery:"article-gallery",productImagesGallery:"color-images-gallery",cameraImagesGallery:"camera-image-gallery",realisticImagesGallery:"realistic-image-gallery"},productRatingType={article:3,imageGallery:5,videoGallery:7,highPrice:9},satisfationType={disappointment:0,satisfation:6},galleryType={none:-1,featuredImageGallery:0,videoGallery:1,productImageGallery:2,unboxImageGallery:3,threeSixtyGallery:4,specificationGallery:5,articleGallery:6,cameraImageGallery:7,realisticImageGallery:8},jsType={string:"string",number:"number",boolean:"boolean","function":"function"};const listGalleries=new ListGalleries;$(document).ready(function(){const n=new Specification;n.mounted()});var rooturl=null,gl_productID=null,gl_isFeedbackLoad=!1,gl_rt_currentPage=0,gl_rtCurStar=0,gl_rt_currentImg=!1,gl_rt_currentOrder=1,gl_rt_siteID=1,gl_rt_isRatingPage=0,gl_rt_isMobile=null;$(document).ready(function(){console.log("rtPage_m_v2");initRating();checkPopupRating();hideRtContentText();document.zNSRating&&($([document.documentElement,document.body]).animate({scrollTop:$("#danhgia").offset().top},2400),showloading(),setTimeout(function(){showInputRating();hideloading()},2500))});gl_isGetScript=!1;gl_rtCurStar=0;gl_sendRating=!1;
/*!
 * The Final Countdown for jQuery v2.0.4 (http://hilios.github.io/jQuery.countdown/)
 * Copyright (c) 2014 Edson Hilios
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){"use strict";function f(n){if(n instanceof Date)return n;if(String(n).match(t))return String(n).match(/^[0-9]*$/)&&(n=Number(n)),String(n).match(/\-/)&&(n=String(n).replace(/\-/g,"/")),new Date(n);throw new Error("Couldn't cast `"+n+"` to a date object.");}function e(n){return function(t){var e=t.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi),f,s;if(e)for(f=0,s=e.length;s>f;++f){var r=e[f].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),c=new RegExp(r[0]),h=r[1]||"",l=r[3]||"",i=null;r=r[2];u.hasOwnProperty(r)&&(i=u[r],i=Number(n[i]));null!==i&&("!"===h&&(i=o(l,i)),""===h&&10>i&&(i="0"+i.toString()),t=t.replace(c,i.toString()))}return t.replace(/%%/,"%")}}function o(n,t){var i="s",r="";return n&&(n=n.replace(/(:|;|\s)/gi,"").split(/\,/),1===n.length?i=n[0]:(r=n[0],i=n[1])),1===Math.abs(t)?r:i}var s=100,i=[],t=[],u,r;t.push(/^[0-9]*$/.source);t.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);t.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source);t=new RegExp(t.join("|"));u={Y:"years",m:"months",w:"weeks",d:"days",D:"totalDays",H:"hours",M:"minutes",S:"seconds"};r=function(t,r,u){this.el=t;this.$el=n(t);this.interval=null;this.offset={};this.instanceNumber=i.length;i.push(this);this.$el.data("countdown-instance",this.instanceNumber);u&&(this.$el.on("update.countdown",u),this.$el.on("stoped.countdown",u),this.$el.on("finish.countdown",u));this.setFinalDate(r);this.start()};n.extend(r.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var n=this;this.update();this.interval=setInterval(function(){n.update.call(n)},s)},stop:function(){clearInterval(this.interval);this.interval=null;this.dispatchEvent("stoped")},pause:function(){this.stop.call(this)},resume:function(){this.start.call(this)},remove:function(){this.stop();i[this.instanceNumber]=null;delete this.$el.data().countdownInstance},setFinalDate:function(n){this.finalDate=f(n)},update:function(){return 0===this.$el.closest("html").length?void this.remove():(this.totalSecsLeft=this.finalDate.getTime()-(new Date).getTime(),this.totalSecsLeft=Math.ceil(this.totalSecsLeft/1e3),this.totalSecsLeft=this.totalSecsLeft<0?0:this.totalSecsLeft,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/3600)%24,days:Math.floor(this.totalSecsLeft/86400)%7,totalDays:Math.floor(this.totalSecsLeft/86400),weeks:Math.floor(this.totalSecsLeft/604800),months:Math.floor(this.totalSecsLeft/2592e3),years:Math.floor(this.totalSecsLeft/31536e3)},void(0===this.totalSecsLeft?(this.stop(),this.dispatchEvent("finish")):this.dispatchEvent("update")))},dispatchEvent:function(t){var i=n.Event(t+".countdown");i.finalDate=this.finalDate;i.offset=n.extend({},this.offset);i.strftime=e(this.offset);this.$el.trigger(i)}});n.fn.countdown=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){var e=n(this).data("countdown-instance"),u,f;void 0!==e?(u=i[e],f=t[0],r.prototype.hasOwnProperty(f)?u[f].apply(u,t.slice(1)):null===String(f).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(u.setFinalDate.call(u,f),u.start()):n.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,f))):new r(this,t[0],t[1])})}});$(document).ready(function(){gtm_ProductDetailView();GetProductScrollDetail();$(document).on("click",".related.sameproduct .listproduct .item a.box-product",function(){var n=$(this).data("name"),t=$(this).data("id"),i=$(this).data("price"),r=$(this).data("brand"),u=$(this).data("cate"),f=$(this).closest(".related.sameproduct").find(".related__ttl").text(),e=$(this).parent().data("pos"),o=$(this).data("is-recommended");gtm_ProductClick(n,t.toString(),i.toString(),r,u,f,e.toString(),o)});$(document).on("click",".related.sameproduct .listproduct li a.box-product",function(){var n=$(this).data("name"),t=$(this).data("id"),i=$(this).data("price"),r=$(this).data("brand"),u=$(this).data("cate"),f=$(this).closest(".related.sameproduct").find(".related__ttl").text(),e=$(this).parent().data("pos"),o=$(this).data("is-recommended");gtm_ProductClick(n,t.toString(),i.toString(),r,u,f,e.toString(),o)});$(document).on("click",".related.acc .listproduct .item a.main-contain",function(){var n=$(this).data("name"),t=$(this).data("id"),i=$(this).data("price"),r=$(this).data("brand"),u=$(this).data("cate"),f=$(this).closest(".related.acc").find(".related__ttl span").text(),e=$(this).parent().data("pos"),o=$(this).data("is-recommended");gtm_ProductClick(n,t.toString(),i.toString(),r,u,f,e.toString(),o)});$(document).on("click",".related.acc .listproduct li a.main-contain",function(){var n=$(this).data("name"),t=$(this).data("id"),i=$(this).data("price"),r=$(this).data("brand"),u=$(this).data("cate"),f=$(this).closest(".related.acc").find(".related__ttl span").text(),e=$(this).parent().data("pos"),o=$(this).data("is-recommended");gtm_ProductClick(n,t.toString(),i.toString(),r,u,f,e.toString(),o)});$(".block-button a.pay-taichinh").click(function(){var n=getModelTracking();$(this).hasClass("twoprice")?(n.productPromoyionType="Khuyến mãi Online 2 giá",n.orderType="Trả góp tài chính"):$(".giamsoc-ol").length>0||$(".block__promo span.red").length>0?(n.productPromoyionType="Online ontop",n.orderType="Trả góp tài chính"):$(this).hasClass("multi")?(n.productPromoyionType="Khuyến mãi đặt trước",n.orderType="Trả góp tài chính"):(n.productPromoyionType="Khuyến mãi thường",n.orderType="Trả góp tài chính");gtm_ProductAddtoCart(n)});$(".block-button a.pay-nganluong").click(function(){var n=getModelTracking();$(this).hasClass("twoprice")?(n.productPromoyionType="Khuyến mãi online 2 giá",n.orderType="Trả góp ngân lượng"):$(this).parent().hasClass("saving")?(n.productPromoyionType="Khuyến mãi online tiết kiệm",n.orderType="Trả góp ngân lượng"):$(".giamsoc-ol").length>0||$(".block__promo span.red").length>0?(n.productPromoyionType="Online ontop",n.orderType="Trả góp ngân lượng"):$(this).hasClass("multi")?(n.productPromoyionType="Khuyến mãi đặt trước",n.orderType="Trả góp ngân lượng"):(n.productPromoyionType="Khuyến mãi thường",n.orderType="Trả góp ngân lượng");gtm_ProductAddtoCart(n)});$(document).on("click",".acc button.owl-next",function(){var n=$(".acc .listproduct .active .item > a"),t="";n.length>0&&(t="Phụ kiện liên quan",addListProductIntoImpression(n,t,10))});$(document).on("click",".acc button.owl-prev",function(){var n=$(".acc .listproduct .active .item > a"),t="";n.length>0&&(t="Phụ kiện liên quan",addListProductIntoImpression(n,t,10))});$(document).on("click",".sameproduct button.owl-next",function(){var n=$(".sameproduct .listproduct .active .item > a.box-product"),t;(n==undefined||n==""||n.length<1)&&(n=$(".sameproduct .listproduct li > a.box-product"));t="";n.length>0&&(t="Sản phẩm liên quan",addListProductIntoImpression(n,t,10))});$(document).on("click",".sameproduct button.owl-prev",function(){var n=$(".sameproduct .listproduct .active .item > a.box-product"),t;(n==undefined||n==""||n.length<1)&&(n=$(".sameproduct .listproduct li > a.box-product"));t="";n.length>0&&(n="Sản phẩm liên quan",addListProductIntoImpression(n,t,10))})});flagGetProductScrollAcc=!1;flagGetProductScrollSameProduct=!1;$(document).ready(function(){var r,u,i;initLoadData();$.fn.serializeObject=function(){let n={},t=this.serializeArray();return $.each(t,function(){n[this.name]!==undefined?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n};initModals();StickyButton();OnLoadBannerDetail();OnLoadPolicy();const n=document.querySelector(".sliderX");if(n!=null){let t=!1,i,r;n.addEventListener("mousedown",u=>{t=!0,n.classList.add("active"),i=u.pageX-n.offsetLeft,r=n.scrollLeft});n.addEventListener("mouseleave",()=>{t=!1,n.classList.remove("active")});n.addEventListener("mouseup",()=>{t=!1,n.classList.remove("active")});n.addEventListener("mousemove",u=>{if(t){u.preventDefault();const f=u.pageX-n.offsetLeft,e=f-i;n.scrollLeft=r-e}})}$(".jsClick").click(function(){var n=$(this).attr("data-price");$(".jsClick").removeClass("active");$(".block-price2").removeClass("active");$(this).addClass("active");$("#"+n).addClass("active");$(this).data("price")=="price02"?($("#status-delivery-2price").find(".lddl").html()!=undefined&&CheckTimeCanDelivery(!0),$(".scenarioNomal").hide(),$(".scenarioTwoPriceDetail").show(),window.history.replaceState("","",window.location.href.replace("#2-gia","")+"#2-gia")):($(".scenarioNomal").show(),$(".scenarioTwoPriceDetail").hide(),window.history.replaceState("","",window.location.href.replace("#2-gia","")),CheckTimeCanDelivery(!1));getPolicy()});$(".jsClick.red").trigger("click");$(".scrolling").on("scroll",function(){var n=$(this).parent();$(this).scrollLeft()+$(this).innerWidth()>=$(this)[0].scrollWidth?n.hasClass("scroll-right")&&n.removeClass("scroll-right"):$(this).scrollLeft()===0?n.hasClass("scroll-left")&&n.removeClass("scroll-left"):(n.hasClass("scroll-right")||n.addClass("scroll-right"),n.hasClass("scroll-left")||n.addClass("scroll-left"))});for($(".box03.scrolling.group.mobi").each(function(){$(this).html()!=undefined&&$(this).find(".box03__item.act").html()!=undefined&&$(this).animate({scrollLeft:$(this).find(".box03__item.act").offset().left-20},300)}),$(".box03.color.group a.blueji").click(function(){$(".box03.color.group a.blueji.act").removeClass("act");$(this).addClass("act");$(this).parent().prev().find("b").html($(this).text());var n=$(".box03.size.group a.color"+$(this).data("color"));n.length==1?window.location.href=n.attr("href"):($(".box03.size.group").prev().find("b").hide(),$(".box03.size.group a").addClass("hide"),n.removeClass("hide"))}),scrolling_tables=document.getElementsByClassName("scrolling"),r=0;r<scrolling_tables.length;r++)scrolling_div=scrolling_tables[r],scrolling_div.offsetWidth<scrolling_div.scrollWidth&&($(".scrolling_inner").hasClass("scroll-right")||$(".scrolling_inner").addClass("scroll-right"));$(".jsSosanh").click(function(){$(".detail-ss").addClass("showss");$(".bgback").addClass("showbg")});$(".detail-ss-close").click(function(){$(".detail-ss").removeClass("showss");$(".bgback").removeClass("showbg")});$(".jsBuy").click(function(){$(".show-buynow").addClass("showopacity");$(".bgback").addClass("showbg");$("body").css({overflow:"hidden"})});$(".show-buynow__close").click(function(){$(".show-buynow").removeClass("showopacity");$(".bgback").removeClass("showbg");$("body").css({overflow:"scroll"})});$(".btnnumber").click(function(){var n=$(this).parent().parent().find("input");$(this).hasClass("btnnumber-dec")?n.val(parseInt(n.val())+1):parseInt(n.val())>1&&n.val(parseInt(n.val())-1)});$(".li-click").click(function(){$(".li-click").removeClass("checkrdo");$(this).addClass("checkrdo")});$(".jsForm").click(function(){$(".box-register").addClass("show-form");$("body").css({overflow:"hidden"})});$(".spmarket-close").click(function(){$(".box-register").removeClass("show-form");$("body").css({overflow:"scroll"})});$(".back-store").click(function(){$(".box-register").removeClass("show-form")});$(".register-close").click(function(){$(".box-register").removeClass("show-form");$(".spmarket").removeClass("dpblock");$("body").css({overflow:"scroll"});$(".spmarket__top").hide()});$(".jsComplete").click(function(){$(".form-complete ").addClass("show-complete")});$(".complete-close").click(function(){$(".form-complete ").removeClass("show-complete");$(".box-register").removeClass("show-form");$(".spmarket").removeClass("dpblock");$("body").css({overflow:"scroll"});$(".spmarket__top").hide()});$(".block-sign .bs-gender span").click(function(){$(".block-sign .bs-gender span.active").removeClass("active");$(this).addClass("active");$("#SignGender").val($(this).data("gender"))});$(document).on("click","a.item-ss",function(){var n=0,r,i,t,u;n=isMobile?$(this).parents("li").data("id"):$(this).parents("div.item").data("id");n==undefined&&(n=$(this).parents("li").data("id"));n>0&&(r=!1,$(".stickcompare").length<=0&&(i=getCookie("ck_idcompare"),i!=""&&i!=null&&(t=i.split(","),t.indexOf(n.toString())>=0?(u=t.indexOf(n.toString()),t.splice(u,1),n=0,$(this).removeClass("active").html("<i><\/i> So sánh")):$(this).addClass("active").html("<i><\/i> Đã thêm so sánh"),t.length>0&&(r=!0,getCompareListByListID(t.toString(),n)))),r||addToCompare(n))});$(document).on("click","div.box02__right",function(){var n=$(this).data("id");n>0&&($(".stickcompare").length<=0?showCompare(n,"div.box02__right"):addToCompare(n,event,"div.box02__right"))});isMobile||InitProductOwlCarousel($(".slider-related"));CheckTimeCanDelivery(!1);Countdown();countCompare();$(".detail_2002 .p-slide .owl-carousel").length>0?$(".p-slide .owl-carousel").each(function(){$(this).owlCarousel({nav:!0,items:3,itemsDesktop:[1199,3],itemsDesktopSmall:[979,3],slideBy:3,dots:!1})}):$(".p-slide .owl-carousel").each(function(){var n=$(this).data("item")==undefined?5:$(this).data("item");$(this).owlCarousel({nav:!0,items:n,itemsDesktop:[1199,5],itemsDesktopSmall:[979,5],slideBy:5,dots:!1})});$(".pr-item.img .owl-carousel").owlCarousel({nav:!0,items:3,itemsDesktop:[1199,3],itemsDesktopSmall:[979,3],slideBy:3,dots:!1});$(document).on("click",".sticky-bar__item.sticky-bar-search .jsSearch",function(){let n=$(".sticky-bar__item.sticky-bar-search .sticky-bar-input");const t=$(n).find("input").val();t?goToSearchPage(t):$(n).hasClass("active")===!0?$(n).removeClass("active"):($(n).addClass("active"),$(n).find("input").focus())});$(document).on("keyup input",".sticky-bar__item.sticky-bar-search .sticky-bar-input input",function(n){n.key==="Enter"&&goToSearchPage(n.target.value)});if(CheckPromoteBHX(),$(".detail-rate").click(function(){$("html,body").animate({scrollTop:$("#danhgia").offset().top-10},500)}),isMobile&&$(".border7").each(function(){$(this).next().hasClass("border7")&&$(this).remove()}),$(".generate-promotion-products").length>0&&$(".generate-promotion-products").each(function(){BuildProductByShortCode(this)}),AddFacebookLikeBox(),$(".box01__tab").length>0&&$(".box01__tab div").first().attr("id")=="thumb-color-images-gallery-0"&&(console.log("re-init gallery first thump"),$("#thumb-color-images-gallery-0").click()),$(".policy__list li").length==0&&(u=$(".policy_intuitive").prev(),u.hasClass("border7")&&u.remove(),$(".policy_intuitive").remove()),CheckButtonCompareCategory(),$(".box_saving.box_onlineol .bs_rule").length>0&&$(".box_saving.box_onlineol .bs_rule").prev().length==0&&$(".box_saving.box_onlineol .bs_rule").css("border-top",0).css("padding-top",0),$(".sticky-bar").length>0&&document.isDesktop==0&&(i=$(".sticky-bar a").not(".sticky-bar-chat"),i.length>0&&(i.length==1?i.css("width","100%").height(36):i.length==2&&i.css("width","50%").height(36))),document.storeId>0&&$(".buysafe .header__logo").attr("href","/buy-safety/"+document.cateUrl+"/"+document.storeId),$(".product__coupon").length>0&&$("._bannerdetail__top").length>0?($("._bannerdetail__top").click(function(n){n.preventDefault();OpenPopupCoupon()}),$(".product__coupon form").submit(function(){return!1})):$(".product__coupon").length>0&&($(".product__coupon").remove(),console.log("Remove popupcoupon")),isMobile)$(document).on("click",".deliverytype i",function(){$(this).toggleClass("act");$(this).parent().next().css({top:$(this).parent().height()+"px"});$(this).parent().next().toggleClass("hide")});else $(document).on("mouseover",".deliverytype i",function(){$(this).addClass("act");$(".deliverytype div").css({top:$(this).parent().height()+"px"});$(".deliverytype div").removeClass("hide")}).on("mouseout",".deliverytype i",function(){$(this).removeClass("act");$(".deliverytype div").addClass("hide")});const f=document.querySelector(".box03--nopadd ");f!=null&&f.addEventListener("wheel",n=>{n.preventDefault(),f.scrollLeft+=n.deltaY});const t=document.querySelector(".box03--nopadd ");if(t!=null){let n=!1,i,r,f=function(u){n=!0;i=u.pageX-t.offsetLeft;r=t.scrollLeft},u=function(){n=!1};t.addEventListener("mousemove",u=>{if(u.preventDefault(),n){const f=u.pageX-t.offsetLeft,e=f-i;t.scrollLeft=r-e}});t.addEventListener("mousedown",f,!1);t.addEventListener("mouseup",u,!1);t.addEventListener("mouseleave",u,!1)}$(".sizechart").click(function(){$(".popup-sizechart").show();$("body").addClass("over-flow")});$(".popup-sizechart>div>a").click(function(){$(".popup-sizechart").hide();$("body").removeClass("over-flow")})});flagSignInfomation=!1;flagSignInfomationCustomer=!1;flagCheckPromoteBHX=!1;createCookie=function(n,t,i){var u,r;i?(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString()):u="";document.cookie=n+"="+t+u+"; path=/"};issentcoupon=!1;$(document).on("keyup",function(n){n.key=="Escape"&&$(".product__coupon").hide();$("html,body").removeClass("over-flow")});flagReloadFlashSale=!1;$(document).ready(function(){var n={proId:$("section[data-id]").data("id"),cateId:$("section[data-cate-id]").data("cate-id")};SetViewedHistory(n,20);LoadViewedHistoryByCate(n,"detailPage");$(document).on("click","a.openWarrantyNew",function(){LoadViewStoreBusiness();showPopup()});$(document).on("click",".box-available a.istock-close",function(){$(".box-available").hide();hidePopup()})});IsLoadStoreBusiness=!0;$(document).on("click",".boxprov .city",function(){$(this).next().find("aside").length>0&&($(".boxprov .city").not(this).next().hide(),$(this).next().slideToggle(),$(".boxprov .listdist").hide(),$(".boxprov .listcity input[type=text]").val(""))});$(document).on("click",".boxprov .listcity aside a",function(){var n=$(this).data("value");$(".boxprov .listcity").hide();$(".boxprov .listcity aside a").removeClass("act").show();$(this).addClass("act");$(".boxprov .city span").html($(this).html());LoadDistrictStoreBusinessByProvince(n);$(".boxprov .city span").data("id",n);$(".boxprov .dist span").html("Quận, Huyện");$(".boxprov .dist span").data("districtid",0);LoadStoreBusinessByProvince()});$(document).on("click",".boxprov .dist",function(){$(this).next().find("aside").length>0&&($(".boxprov .dist").not(this).next().hide(),$(this).next().slideToggle(),$(".boxprov .listcity").hide(),$(".boxprov .listdist input[type=text]").val(""))});$(document).on("click",".boxprov .listdist aside a",function(){var n=$(this).data("districtid");$(".boxprov .listdist").hide();$(".boxprov .listdist aside a").removeClass("act").show();$(this).addClass("act");$(".boxprov .dist span").html($(this).html());$(".boxprov .dist span").data("districtid",n);LoadStoreBusinessByProvince()});$(document).on("keyup",".boxprov .listcity input[type=text]",function(){var n=$(this).val();$(".boxprov .listcity a").each(function(){var t=$(this).text().toLowerCase();stringToSlug(t).indexOf(stringToSlug(n))!==-1?$(this).show():$(this).hide()})});$(document).on("keyup",".boxprov .listdist input[type=text]",function(){var n=$(this).val();$(".boxprov .listdist a").each(function(){var t=$(this).text().toLowerCase();stringToSlug(t).indexOf(stringToSlug(n))!==-1?$(this).show():$(this).hide()})});IsLoadViewMarketStock=!0;$(".jsSpmarket").click(function(){LoadViewMarketStock()});$(document).on("click",".jsnearstore",function(){$(".spmarket__main .overlayloading").show();GetLocal(LoadViewMarketStock);$(this).addClass("hide")});$(document).on("click",".spmarket-close",function(){$(".spmarket").removeClass("dpblock");$(".spmarket").hide();hidePopup()});$(document).on("click",".spmarket__address .city",function(){$(this).next().find("aside").length>0&&($(".spmarket__address .city").not(this).next().hide(),$(this).next().slideToggle(),$(".spmarket__address .listdist").hide(),$(".spmarket__address .listcity input[type=text]").val(""),$(".spmarket__address .listcity a").show())});$(document).on("click",".spmarket__address .listcity aside a",function(){if($(this).hasClass("active-pro"))return!1;$(".spmarket__address .listcity aside a").removeClass("active-pro");$(this).addClass("active-pro");var n=$(this).data("value");$(".spmarket__address .listcity").hide();$(".spmarket__address .city span").html($(this).html());GetDistrictStockStoreByProvince(n);$(".spmarket__address .city").data("id",n);$(".spmarket__address .dist").data("districtid",0);locat=null;LoadStoreStockByProvince()});$(document).on("click",".spmarket__address .dist",function(){$(this).next().find("aside").length>0&&($(".spmarket__address .dist").not(this).next().hide(),$(this).next().slideToggle(),$(".spmarket__address .listcity").hide(),$(".spmarket__address .listdist input[type=text]").val(""),$(".spmarket__address .listdist a").show())});$(document).on("click",".spmarket__address .listdist aside a",function(){if($(this).hasClass("active-dist"))return!1;$(".spmarket__address .listdist aside a").removeClass("active-dist");$(this).addClass("active-dist");var n=$(this).data("value");$(".spmarket__address .listdist").hide();$(".spmarket__address .dist span").html($(this).html());$(".spmarket__address .dist").data("districtid",n);locat=null;LoadStoreStockByProvince()});$(document).on("keyup",".spmarket__address .listcity input[type=text]",function(){var n=$(this).val();$(".spmarket__address .listcity a").each(function(){var t=$(this).text().toLowerCase();stringToSlug(t).indexOf(stringToSlug(n))!==-1?$(this).show():$(this).hide()})});$(document).on("keyup",".spmarket__address .listdist input[type=text]",function(){var n=$(this).val();$(".spmarket__address .listdist a").each(function(){var t=$(this).text().toLowerCase();stringToSlug(t).indexOf(stringToSlug(n))!==-1?$(this).show():$(this).hide()})});$(document).on("click",".spmarket__code .color-item",function(){var n,t;if($(this).hasClass("act"))return!1;$(this).parent().parent().find(".color-item").removeClass("act");$(this).addClass("act");$(this).hasClass("prevent")?($(".spmarket__code.size .color-item").removeClass("act"),$(".spmarket__code.size .color-item").addClass("hide"),n=$(".spmarket__code.size .color-item.color"+$(this).data("color")),n.removeClass("hide"),n.length==1?n.trigger("click"):(t=!1,n.each(function(){t||($(this).trigger("click"),t=!0)}))):LoadStoreStockByProvince($(this).data("code"))});$(document).on("click",".list-address .viewStore",function(){$(this).hide();$(this).next().show();$(this).next().next().show();$(this).next().next().next().show();$(this).next().next().next().next().show();$(this).next().next().next().next().next().show();$(this).next().next().next().next().next().next().show()});